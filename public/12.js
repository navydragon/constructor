(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"7dIG":function(t,n,e){(t.exports=e("I1BE")(!1)).push([t.i,'.VueTables__child-row-toggler {\n  display: inline-block;\n  margin: auto;\n  width: 100%;\n  height: 16px;\n  text-align: center;\n  line-height: 16px;\n  cursor: pointer;\n}\n.VueTables__child-row-toggler--closed::before {\n  content: "+";\n}\n.VueTables__child-row-toggler--open::before {\n  content: "-";\n}\n.VueTables__sortable {\n  position: relative;\n}\n.VueTables__sort-icon {\n  position: absolute;\n  top: 50%;\n  right: 6px;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n[dir=rtl] .VueTables__sort-icon {\n  right: auto;\n  left: 6px;\n}\n.VuePagination nav {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  -ms-flex-pack: justify;\n      justify-content: space-between;\n  width: 100%;\n}\n.VuePagination .pagination,\n.VuePagination__count {\n  -ms-flex-preferred-size: auto !important;\n      flex-basis: auto !important;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  margin: 0 0 1rem 0;\n  width: auto !important;\n}\n.VueTables__search label,\n.VueTables__limit label {\n  display: inline-block !important;\n  margin-right: .5em;\n}\n[dir=rtl] .VueTables__search label, [dir=rtl]\n.VueTables__limit label {\n  margin-right: 0;\n  margin-left: .5em;\n}\n[dir="rtl"] .pull-left {\n  float: right;\n}\n[dir="rtl"] .pull-right {\n  float: left;\n}\n.default-style .VueTables__sort-icon {\n  color: #a3a4a6;\n  font-size: 0.75rem;\n}\n.default-style .VuePagination__pagination-item > a {\n  padding: 0.375rem 0.25rem;\n  min-width: calc(1.5rem + 2px);\n  text-align: center;\n  font-size: 0.75rem;\n  border-radius: 0.25rem;\n}\n.default-style .VuePagination__count {\n  color: #a3a4a6;\n  font-size: 0.75rem;\n}\n.material-style .VueTables__sort-icon {\n  color: #a3a4a6;\n  font-size: 0.75rem;\n}\n.material-style .VuePagination__pagination-item > a {\n  padding: 0.375rem 0.25rem;\n  min-width: calc(1.5rem + 0px);\n  text-align: center;\n  font-size: 0.75rem;\n  border-radius: 0.125rem;\n}\n.material-style .VuePagination__count {\n  color: #a3a4a6;\n  font-size: 0.75rem;\n}\n',""])},g5NV:function(t,n,e){"use strict";e.r(n);var a=e("XuX8"),i=e.n(a),r=e("nr6O"),o=e("zkbK"),s=e("zQV0");i.a.use(r.ClientTable);var l={name:"profstandarts",metaInfo:{title:"Профессиональные стандарты"},components:{ClientTable:r.ClientTable,NewProfstandart:o.a,EditProfstandart:s.a},data:function(){return{isBusy:!0,n_ps:"ps",edit_item:{},items:[],columns:["code","name","actions"],options:{sortable:["name","code"],filterable:["name","code"],filterByColumn:!0,sortIcon:{is:"fa-sort",base:"fas",up:"fa-sort-up",down:"fa-sort-down"},headings:{code:"Код",name:"Название",actions:"Действия"},texts:{count:"Showing {from} to {to} of {count} records|Записей: {count} |Одна запись",first:"First",last:"Last",filter:"Поиск:",filterPlaceholder:"текст поиска",limit:"Записей:",page:"Страница:",noResults:"Не найдено ни одной записи",filterBy:"Поиск",loading:"Загрузка...",defaultOption:"Select {column}",columns:"Columns"}}}},methods:{create_profstandart:function(){this.$bvModal.show("modal-newprofstandart")},add_profstandart:function(t){self=this,axios.post("/profstandarts/add_profstandart",t).then((function(t){self.items.push(t.data),self.n_ps+=1}))},remove_profstandart:function(t){var n=this;this.$bvModal.msgBoxConfirm("Действительно хотите удалить профстандарт «"+t.name+"»?").then((function(e){!0===e&&axios.post("/profstandarts/remove_profstandart",t).then((function(t){n.items=n.items.filter((function(n){return n.id!=t.data}))}))}))},edit_profstandart:function(t){var n=this;this.edit_item=t,this.$nextTick((function(){n.$bvModal.show("modal-editprofstandart")}))},update_profstandart:function(t){self=this,axios.post("/profstandarts/update_profstandart",t).then((function(t){var n=self.items.find((function(n){return n.id==t.data.id}));n.code=t.data.code,n.name=t.data.name,self.$bvModal.hide("modal-editprofstandart")})).finally((function(){return self.edit_item={}}))}},mounted:function(){self=this,axios.get("/profstandarts/get_profstandarts").then((function(t){self.items=t.data})).finally((function(){return self.isBusy=!1}))}},d=(e("mswM"),e("KHd+")),u=Object(d.a)(l,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("b-card",{attrs:{title:"Профессиональные стандарты"}},[e("b-button",{attrs:{variant:"primary"},on:{click:function(n){return t.create_profstandart()}}},[t._v("Добавить профстандарт")]),t._v(" "),e("hr",{staticClass:"container-m-nx border-light mt-2 mb-2"}),t._v(" "),t.isBusy?t._e():e("v-client-table",{attrs:{data:t.items,columns:t.columns,options:t.options},scopedSlots:t._u([{key:"actions",fn:function(n){return[e("div",[e("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-info icon-btn"},on:{click:function(e){return e.preventDefault(),t.edit_profstandart(n.row)}}},[e("i",{staticClass:"ion ion-md-create"})]),t._v(" "),e("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-danger icon-btn"},on:{click:function(e){return e.preventDefault(),t.remove_profstandart(n.row)}}},[e("i",{staticClass:"ion ion-md-close"})])],1)]}}],null,!1,3329996254)}),t._v(" "),e("new-profstandart",{key:t.n_ps,on:{add_profstandart:t.add_profstandart}}),t._v(" "),e("edit-profstandart",{key:t.edit_item.id,attrs:{edit_item:t.edit_item},on:{update_profstandart:t.update_profstandart}})],1)}),[],!1,null,null,null);n.default=u.exports},kYbW:function(t,n,e){var a=e("7dIG");"string"==typeof a&&(a=[[t.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};e("aET+")(a,i);a.locals&&(t.exports=a.locals)},mswM:function(t,n,e){"use strict";e("kYbW")},zQV0:function(t,n,e){"use strict";var a={name:"edit-profstandart",props:{edit_item:Object},data:function(){return{new_item:{code:"",name:""},errors:[]}},methods:{handle_ok:function(t){t.preventDefault(),this.errors=[],""==this.new_item.code&&this.errors.push("Не заполнено поле «Код»."),""==this.new_item.name&&this.errors.push("Не заполнено поле «Название профессии»."),0==this.errors.length&&(this.$emit("update_profstandart",this.new_item),this.new_item="")}},mounted:function(){self=this,axios.get("/profstandarts/get_profstandart",this.edit_item).then((function(t){self.new_item=t.data}))}},i=e("KHd+"),r=Object(i.a)(a,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("b-modal",{attrs:{size:"lg",id:"modal-editprofstandart",title:"Редактирование параметров профессионального стандарта","no-close-on-esc":"","no-close-on-backdrop":"","ok-title":"Сохранить","cancel-title":"Закрыть"},on:{ok:t.handle_ok}},[e("b-form-group",{attrs:{id:"fieldset-1",description:"Пример: 16.024",label:"Код","label-size":"lg","label-for":"input-1"}},[e("b-form-input",{attrs:{id:"input-1",trim:""},model:{value:t.new_item.code,callback:function(n){t.$set(t.new_item,"code",n)},expression:"new_item.code"}})],1),t._v(" "),e("b-form-group",{attrs:{id:"fieldset-2",description:"Пример: Машинист асфальтоукладчика",label:"Название профессии","label-size":"lg","label-for":"input-2"}},[e("b-form-input",{attrs:{id:"input-2",trim:""},model:{value:t.new_item.name,callback:function(n){t.$set(t.new_item,"name",n)},expression:"new_item.name"}})],1),t._v(" "),t.errors.length>0?e("b-alert",{attrs:{show:"",variant:"danger"}},[e("strong",[t._v("Обнаружены ошибки:")]),t._v(" "),e("ul",t._l(t.errors,(function(n,a){return e("li",{key:a},[t._v(t._s(n))])})),0)]):t._e()],1)}),[],!1,null,null,null);n.a=r.exports},zkbK:function(t,n,e){"use strict";var a={name:"new-profstandart",data:function(){return{new_item:{code:"",name:""},errors:[]}},methods:{handle_ok:function(t){t.preventDefault(),this.errors=[],""==this.new_item.code&&this.errors.push("Не заполнено поле «Код»."),""==this.new_item.name&&this.errors.push("Не заполнено поле «Название профессии»."),0==this.errors.length&&(this.$emit("add_profstandart",this.new_item),this.new_item="")}}},i=e("KHd+"),r=Object(i.a)(a,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("b-modal",{attrs:{size:"lg",id:"modal-newprofstandart",title:"Добавить новый профессиональный стандарт","no-close-on-esc":"","no-close-on-backdrop":"","ok-title":"Сохранить","cancel-title":"Закрыть"},on:{ok:t.handle_ok}},[e("b-form-group",{attrs:{id:"fieldset-1",description:"Пример: 16.024",label:"Код","label-size":"lg","label-for":"input-1"}},[e("b-form-input",{attrs:{id:"input-1",trim:""},model:{value:t.new_item.code,callback:function(n){t.$set(t.new_item,"code",n)},expression:"new_item.code"}})],1),t._v(" "),e("b-form-group",{attrs:{id:"fieldset-2",description:"Пример: Машинист асфальтоукладчика",label:"Название профессии","label-size":"lg","label-for":"input-2"}},[e("b-form-input",{attrs:{id:"input-2",trim:""},model:{value:t.new_item.name,callback:function(n){t.$set(t.new_item,"name",n)},expression:"new_item.name"}})],1),t._v(" "),t.errors.length>0?e("b-alert",{attrs:{show:"",variant:"danger"}},[e("strong",[t._v("Обнаружены ошибки:")]),t._v(" "),e("ul",t._l(t.errors,(function(n,a){return e("li",{key:a},[t._v(t._s(n))])})),0)]):t._e()],1)}),[],!1,null,null,null);n.a=r.exports}}]);