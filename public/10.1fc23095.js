(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"7dIG":function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,'.VueTables__child-row-toggler {\n  display: inline-block;\n  margin: auto;\n  width: 100%;\n  height: 16px;\n  text-align: center;\n  line-height: 16px;\n  cursor: pointer;\n}\n.VueTables__child-row-toggler--closed::before {\n  content: "+";\n}\n.VueTables__child-row-toggler--open::before {\n  content: "-";\n}\n.VueTables__sortable {\n  position: relative;\n}\n.VueTables__sort-icon {\n  position: absolute;\n  top: 50%;\n  right: 6px;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n[dir=rtl] .VueTables__sort-icon {\n  right: auto;\n  left: 6px;\n}\n.VuePagination nav {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  -ms-flex-pack: justify;\n      justify-content: space-between;\n  width: 100%;\n}\n.VuePagination .pagination,\n.VuePagination__count {\n  -ms-flex-preferred-size: auto !important;\n      flex-basis: auto !important;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  margin: 0 0 1rem 0;\n  width: auto !important;\n}\n.VueTables__search label,\n.VueTables__limit label {\n  display: inline-block !important;\n  margin-right: .5em;\n}\n[dir=rtl] .VueTables__search label, [dir=rtl]\n.VueTables__limit label {\n  margin-right: 0;\n  margin-left: .5em;\n}\n[dir="rtl"] .pull-left {\n  float: right;\n}\n[dir="rtl"] .pull-right {\n  float: left;\n}\n.default-style .VueTables__sort-icon {\n  color: #a3a4a6;\n  font-size: 0.75rem;\n}\n.default-style .VuePagination__pagination-item > a {\n  padding: 0.375rem 0.25rem;\n  min-width: calc(1.5rem + 2px);\n  text-align: center;\n  font-size: 0.75rem;\n  border-radius: 0.25rem;\n}\n.default-style .VuePagination__count {\n  color: #a3a4a6;\n  font-size: 0.75rem;\n}\n.material-style .VueTables__sort-icon {\n  color: #a3a4a6;\n  font-size: 0.75rem;\n}\n.material-style .VuePagination__pagination-item > a {\n  padding: 0.375rem 0.25rem;\n  min-width: calc(1.5rem + 0px);\n  text-align: center;\n  font-size: 0.75rem;\n  border-radius: 0.125rem;\n}\n.material-style .VuePagination__count {\n  color: #a3a4a6;\n  font-size: 0.75rem;\n}\n',""])},FTpg:function(t,e,n){"use strict";var a={name:"edit-dolgkval",props:{edit_item:Object},data:function(){return{new_item:{code:"",name:""},errors:[]}},methods:{handle_ok:function(t){t.preventDefault(),this.errors=[],""==this.new_item.code&&this.errors.push("Не заполнено поле «Код»."),""==this.new_item.name&&this.errors.push("Не заполнено поле «Название профессии»."),0==this.errors.length&&(this.$emit("update_dolgkval",this.new_item),this.new_item="")}},mounted:function(){self=this,axios.post("/dolgkvals/get_dolgkval",this.edit_item).then((function(t){self.new_item=t.data}))}},i=n("KHd+"),o=Object(i.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{size:"lg",id:"modal-edit-dolgkval",title:"Редактирование параметров","no-close-on-esc":"","no-close-on-backdrop":"","ok-title":"Сохранить","cancel-title":"Закрыть"},on:{ok:t.handle_ok}},[n("b-form-group",{attrs:{id:"fieldset-2",description:"Пример: Машинист асфальтоукладчика",label:"Название профессии","label-size":"lg","label-for":"input-2"}},[n("b-form-input",{attrs:{id:"input-2",trim:""},model:{value:t.new_item.name,callback:function(e){t.$set(t.new_item,"name",e)},expression:"new_item.name"}})],1),t._v(" "),t.errors.length>0?n("b-alert",{attrs:{show:"",variant:"danger"}},[n("strong",[t._v("Обнаружены ошибки:")]),t._v(" "),n("ul",t._l(t.errors,(function(e,a){return n("li",{key:a},[t._v(t._s(e))])})),0)]):t._e()],1)}),[],!1,null,null,null);e.a=o.exports},kYbW:function(t,e,n){var a=n("7dIG");"string"==typeof a&&(a=[[t.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(a,i);a.locals&&(t.exports=a.locals)},mswM:function(t,e,n){"use strict";n("kYbW")},"r0/i":function(t,e,n){"use strict";n.r(e);var a=n("XuX8"),i=n.n(a),o=n("nr6O"),l=n("yKeX"),r=n("FTpg");i.a.use(o.ClientTable);var s={name:"dolgkvals",metaInfo:{title:"Квалификационные требования по должностям"},components:{ClientTable:o.ClientTable,NewDolgkval:l.a,EditDolgkval:r.a},data:function(){return{isBusy:!0,n_ps:"ps",edit_item:{},items:[],columns:["name","actions"],options:{sortable:["name","code"],sortIcon:{is:"fa-sort",base:"fas",up:"fa-sort-up",down:"fa-sort-down"},headings:{name:"Профессия",actions:"Действия"},texts:{count:"Showing {from} to {to} of {count} records|Записей: {count} |Одна запись",first:"First",last:"Last",filter:"Поиск:",filterPlaceholder:"текст поиска",limit:"Записей:",page:"Страница:",noResults:"Не найдено ни одной записи",filterBy:"Filter by {column}",loading:"Загрузка...",defaultOption:"Select {column}",columns:"Columns"}}}},methods:{create_dolgkval:function(){this.$bvModal.show("modal-new-dolgkval")},add_dolgkval:function(t){self=this,axios.post("/dolgkvals/add_dolgkval",t).then((function(t){self.items.push(t.data),self.n_ps+=1}))},remove_dolgkval:function(t){var e=this;this.$bvModal.msgBoxConfirm("Действительно хотите удалить профессию «"+t.name+"»?").then((function(n){!0===n&&axios.post("/dolgkvals/remove_dolgkval",t).then((function(t){e.items=e.items.filter((function(e){return e.id!=t.data}))}))}))},edit_dolgkval:function(t){var e=this;this.edit_item=t,this.$nextTick((function(){e.$bvModal.show("modal-edit-dolgkval")}))},update_dolgkval:function(t){self=this,axios.post("/dolgkvals/update_dolgkval",t).then((function(t){var e=self.items.find((function(e){return e.id==t.data.id}));e.code=t.data.code,e.name=t.data.name,self.$bvModal.hide("modal-edit-dolgkval")})).finally((function(){return self.edit_item={}}))}},mounted:function(){self=this,axios.post("/dolgkvals/get_dolgkvals").then((function(t){self.items=t.data})).finally((function(){return self.isBusy=!1}))}},d=(n("mswM"),n("KHd+")),u=Object(d.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{attrs:{title:"Квалификационные требования по должностям"}},[n("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.create_dolgkval()}}},[t._v("Добавить профессию ")]),t._v(" "),n("hr",{staticClass:"container-m-nx border-light mt-2 mb-2"}),t._v(" "),t.isBusy?t._e():n("v-client-table",{attrs:{data:t.items,columns:t.columns,options:t.options},scopedSlots:t._u([{key:"actions",fn:function(e){return[n("div",[n("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-info icon-btn"},on:{click:function(n){return n.preventDefault(),t.edit_dolgkval(e.row)}}},[n("i",{staticClass:"ion ion-md-create"})]),t._v(" "),n("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-danger icon-btn"},on:{click:function(n){return n.preventDefault(),t.remove_dolgkval(e.row)}}},[n("i",{staticClass:"ion ion-md-close"})])],1)]}}],null,!1,961436894)}),t._v(" "),n("new-dolgkval",{key:t.n_ps,on:{add_dolgkval:t.add_dolgkval}}),t._v(" "),n("edit-dolgkval",{key:t.edit_item.id,attrs:{edit_item:t.edit_item},on:{update_dolgkval:t.update_dolgkval}})],1)}),[],!1,null,null,null);e.default=u.exports},yKeX:function(t,e,n){"use strict";var a={name:"new-dolgkval",data:function(){return{new_item:{code:"",name:""},errors:[]}},methods:{handle_ok:function(t){t.preventDefault(),this.errors=[],""==this.new_item.name&&this.errors.push("Не заполнено поле «Название профессии»."),0==this.errors.length&&(this.$emit("add_dolgkval",this.new_item),this.new_item="")}}},i=n("KHd+"),o=Object(i.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{size:"lg",id:"modal-new-dolgkval",title:"Добавить новую профессию","no-close-on-esc":"","no-close-on-backdrop":"","ok-title":"Сохранить","cancel-title":"Закрыть"},on:{ok:t.handle_ok}},[n("b-form-group",{attrs:{id:"fieldset-2",description:"Пример: Машинист асфальтоукладчика",label:"Название профессии","label-size":"lg","label-for":"input-2"}},[n("b-form-input",{attrs:{id:"input-2",trim:""},model:{value:t.new_item.name,callback:function(e){t.$set(t.new_item,"name",e)},expression:"new_item.name"}})],1),t._v(" "),t.errors.length>0?n("b-alert",{attrs:{show:"",variant:"danger"}},[n("strong",[t._v("Обнаружены ошибки:")]),t._v(" "),n("ul",t._l(t.errors,(function(e,a){return n("li",{key:a},[t._v(t._s(e))])})),0)]):t._e()],1)}),[],!1,null,null,null);e.a=o.exports}}]);