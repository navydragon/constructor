(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Os2C:function(t,n,i){"use strict";i.r(n);var e=i("08io"),s=i.n(e),a=i("Z94T"),o={name:"new-dtp",metaInfo:{title:"Добавить новый раздел"},data:function(){return{new_dtp:"",errors:[]}},methods:{handle_ok:function(t){t.preventDefault(),this.errors=[],""==this.new_dtp&&this.errors.push("Заполните название раздела"),0==this.errors.length&&(this.$emit("add_dtp",this.new_dtp),this.new_dtp="")}}},r=i("KHd+"),d=Object(r.a)(o,(function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",[i("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-newdtp",modifiers:{"modal-newdtp":!0}}],attrs:{variant:"primary"}},[t._v("Добавить раздел")]),t._v(" "),i("b-modal",{attrs:{size:"lg",id:"modal-newdtp",title:"Добавить раздел в типовую структуру","no-close-on-esc":"","no-close-on-backdrop":"","ok-title":"Сохранить"},on:{ok:t.handle_ok}},[i("b-form-group",{attrs:{id:"fieldset-1",label:"Название раздела","label-size":"lg","label-for":"input-1"}},[i("b-form-input",{attrs:{id:"input-1",trim:""},model:{value:t.new_dtp,callback:function(n){t.new_dtp=n},expression:"new_dtp"}})],1),t._v(" "),t.errors.length>0?i("b-alert",{attrs:{show:"",variant:"danger"}},[i("strong",[t._v("Ошибка!")]),t._v(" Заполните название раздела")]):t._e()],1)],1)}),[],!1,null,null,null).exports,_={name:"dpp_inspect",metaInfo:{title:"Просмотр ДПП"},computed:{header:function(){return"Управление ДПП / "+this.item.name+" / Просмотр"}},components:{VJstree:s.a,Nsis:a.a,NewDtp:d},data:function(){return{isBusy:!0,item:{},edit_item:{},ish_data:{},nodes:[],treeData:[{text:"Новая компетенция",id:"nc",opened:!0,type:"folder",color:"btn-outline-dark",children:[]}],attachedTreeData:[{text:"Программа ДПП",id:"pr",opened:!0,type:"folder",color:"btn-outline-dark",children:[]}]}},methods:{get_data:function(){var t=this;axios.get("/dpps/"+this.$route.params.dpp+"/get_ish_version_data/"+self.item.ish_version_id).then((function(n){return t.ish_data=n.data})),axios.get("/dpps/"+this.$route.params.dpp+"/get_zun_version_data2/"+self.item.zun_version_id).then((function(n){return t.nodes=n.data})).finally((function(){return t.isBusy=!1})),this.$nextTick((function(){var n=t;axios.get("/dpps/"+t.$route.params.dpp+"/get_zun_version_data/"+n.item.zun_version_id+"/attached").then((function(t){n.attachedTreeData[0].children=t.data}))}))},add_dtp:function(t){var n=this;axios.post("/typologies/add_dtp",{dtp_name:t,dpp_id:this.$route.params.dpp,ish_version_id:this.ish_data.id,typology_id:this.ish_data.typology_id}).then((function(t){return n.ish_data.dpp_parts.push(t.data)})).finally((function(){return n.$bvModal.hide("modal-newdtp")}))},edit_dtp:function(t){var n=this;this.edit_item=t,this.$nextTick((function(){n.$bvModal.show("edit_modal")}))},handleEditOk:function(t){t.preventDefault(),self=this,axios.post("/typologies/update_dtp",this.edit_item).then((function(t){self.ish_data.dpp_parts.find((function(n){return n.id==t.data.id}));t.data,self.$bvModal.hide("edit_modal")}))},remove_dtp:function(t,n){var i=this;this.$bvModal.msgBoxConfirm("Действительно хотите удалить раздел «"+n+"»? Это также удалит привязки к этому разделу знаний (если они имеются).").then((function(n){1==n&&axios.post("/typologies/remove_dtp",t).then((function(n){return i.ish_data.dpp_parts=i.ish_data.dpp_parts.filter((function(n){return n.id!=t.id}))}))}))},move_up:function(t){var n=this;axios.post("/dpps/"+this.ish_data.id+"/typology_parts/move_up",{part:t.id}).then((function(t){return n.ish_data.dpp_parts=t.data}))},move_down:function(t){var n=this;axios.post("/dpps/"+this.ish_data.id+"/typology_parts/move_down",{part:t.id}).then((function(t){return n.ish_data.dpp_parts=t.data}))}},mounted:function(){var t=this;self=this,axios.get("/dpps/"+this.$route.params.dpp+"/config").then((function(n){return t.item=n.data})).finally((function(){return t.get_data()}))}},l=Object(r.a)(_,(function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",[i("router-link",{attrs:{icon:"ion ion-md-person",to:{name:"dpps"},exact:!0}},[i("b-button",{attrs:{variant:"info"}},[i("i",{staticClass:"ion ion-ios-arrow-back",staticStyle:{"font-size":"20px"}}),t._v(" Назад\n            ")])],1),t._v(" "),i("b-card",{attrs:{title:t.header}},[i("div",[i("b-card",{attrs:{"no-body":""}},[i("b-tabs",{attrs:{pills:"",card:"",vertical:""}},[i("b-tab",{attrs:{title:"Общие сведения",active:""}},[i("h4",[t._v("ОБЩИЕ СВЕДЕНИЯ")]),t._v(" "),i("h5",[t._v("Название ДПП")]),t._v(" "),i("p",[t._v(t._s(t.item.name))]),t._v(" "),i("h5",[t._v("Тип ДПП")]),t._v(" "),i("p",[t._v(t._s(t.item.type_name))]),t._v(" "),i("h5",[t._v("Участники")]),t._v(" "),t._l(t.item.participants,(function(n,e){return i("ul",{key:e},[i("li",[t._v(t._s(n.fullname)+" ("+t._s(n.rolename)+")")])])}))],2),t._v(" "),i("b-tab",{attrs:{title:"Исходные данные"}},[i("h4",[t._v("ИСХОДНЫЕ ДАННЫЕ")]),t._v(" "),t.isBusy?t._e():i("div",[i("h5",[t._v("ТРЕБОВАНИЯ К УРОВНЮ ПРОФЕССИОНАЛЬНОГО ОБРАЗОВАНИЯ")]),t._v(" "),i("div",[t.ish_data.prof_levels.length>0?i("div",t._l(t.ish_data.prof_levels,(function(n,e){return i("ul",{key:e},[i("li",[t._v(t._s(n.name))])])})),0):t._e(),t._v(" "),0==t.ish_data.prof_levels.length?i("p",[t._v("\n                            "+t._s(t.ish_data.req_user_edulevel)+"\n                        ")]):t._e()]),t._v(" "),i("hr"),t._v(" "),i("h5",[t._v("ТРЕБОВАНИЯ К КВАЛИФИКАЦИИ")]),t._v(" "),i("p",[t._v(t._s(t.ish_data.req_user_kval))]),t._v(" "),i("hr"),t._v(" "),i("h5",[t._v("ТИПОВАЯ СТРУКТУРА ДПП")]),t._v(" "),i("b-alert",{attrs:{show:""}},[t._v("Отредактируйте (при необходимости) типовую структуру ДПП")]),t._v(" "),i("new-dtp",{key:"ds",on:{add_dtp:t.add_dtp}}),t._v(" "),i("b-list-group",t._l(t.ish_data.dpp_parts,(function(n,e){return i("b-list-group-item",{key:n.id},[0!=e?i("b-btn",{staticClass:"btn",attrs:{variant:"outline-info icon-btn btn-xs"},on:{click:function(i){return t.move_up(n)}}},[i("i",{staticClass:"ion ion-md-arrow-round-up"})]):t._e(),t._v(" "),e!=t.ish_data.dpp_parts.length-1?i("b-btn",{staticClass:"btn",attrs:{variant:"outline-info icon-btn btn-xs"},on:{click:function(i){return t.move_down(n)}}},[i("i",{staticClass:"ion ion-md-arrow-round-down"})]):t._e(),t._v(" "),i("b-btn",{staticClass:"btn",attrs:{variant:"outline-primary icon-btn btn-xs"},on:{click:function(i){return t.edit_dtp(n)}}},[i("i",{staticClass:"ion ion-md-create"})]),t._v(" "),i("b-btn",{staticClass:"btn",attrs:{variant:"outline-danger icon-btn btn-xs"},on:{click:function(i){return t.remove_dtp(n,n.name)}}},[t._v("X")]),t._v("\n                           "+t._s(n.position)+". "+t._s(n.name)+"\n                        ")],1)})),1),t._v(" "),i("hr"),t._v(" "),i("h5",[t._v("НОРМАТИВНО-СПРАВОЧНАЯ ИНФОРМАЦИЯ")]),t._v(" "),t.isBusy?t._e():i("nsis",{attrs:{mode:"view",ish_version_id:t.ish_data.id}})],1)]),t._v(" "),i("b-tab",{attrs:{title:"Проектирование результатов"}},[t.isBusy?t._e():i("div",[i("h4",[t._v("ПРОЕКТИРОВАНИЕ РЕЗУЛЬТАТОВ")]),t._v(" "),i("h5",[t._v("Сформированные компетенции")]),t._v(" "),t._l(t.nodes.filter((function(t){return"Компетенция"==t.type})),(function(n){return i("div",{key:n.id},[i("h5",[i("i",{staticClass:"ion ion-ios-radio-button-on text-primary"}),t._v(" Компетенция: "+t._s(n.name))]),t._v(" "),i("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},t._l(t.nodes.filter((function(t){return"Навык"==t.type&&t.pid==n.id})),(function(n){return i("li",{key:n.id},[i("i",{staticClass:"ion ion-ios-radio-button-on text-secondary"}),t._v(" Навык: "+t._s(n.name)+"\n                            "),i("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},t._l(t.nodes.filter((function(t){return"Умение"==t.type&&t.pid==n.id})),(function(n){return i("li",{key:n.id},[i("i",{staticClass:"ion ion-ios-radio-button-on text-success"}),t._v(" Умение: "+t._s(n.name)+"\n                                    "),i("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},t._l(t.nodes.filter((function(t){return"Знание"==t.type&&t.pid==n.id})),(function(n){return i("li",{key:n.id},[i("i",{staticClass:"ion ion-ios-radio-button-on text-warning"}),t._v(" Знание: "+t._s(n.name)+"\n                                        ")])})),0)])})),0)])})),0),t._v(" "),i("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},t._l(t.nodes.filter((function(t){return t.type.includes("Умение")&&t.pid==n.id})),(function(n){return i("li",{key:n.id},[i("i",{staticClass:"ion ion-ios-radio-button-on text-success"}),t._v(" Умение: "+t._s(n.name)+"\n                            "),i("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},t._l(t.nodes.filter((function(t){return t.type.includes("Знание")&&t.pid==n.id})),(function(n){return i("li",{key:n.id},[i("i",{staticClass:"ion ion-ios-radio-button-on text-warning"}),t._v(" Знание: "+t._s(n.name)+"\n                                ")])})),0)])})),0)])})),t._v(" "),i("hr"),t._v(" "),i("h5",[t._v("ЗУН, не прикрепленные к компетенциям")]),t._v(" "),i("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},t._l(t.nodes.filter((function(t){return"Навык"==t.type&&"c"==t.pid})),(function(n){return i("li",{key:n.id},[i("i",{staticClass:"ion ion-ios-radio-button-on text-secondary"}),t._v(" Навык: "+t._s(n.name)+"\n                        "),i("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},t._l(t.nodes.filter((function(t){return"Умение"==t.type&&t.pid==n.id})),(function(n){return i("li",{key:n.id},[i("i",{staticClass:"ion ion-ios-radio-button-on text-success"}),t._v(" Умение: "+t._s(n.name)+"\n                                "),i("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},t._l(t.nodes.filter((function(t){return"Знание"==t.type&&t.pid==n.id})),(function(n){return i("li",{key:n.id},[i("i",{staticClass:"ion ion-ios-radio-button-on text-warning"}),t._v(" Знание: "+t._s(n.name)+"\n                                    ")])})),0)])})),0)])})),0),t._v(" "),i("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},t._l(t.nodes.filter((function(t){return"Умение"==t.type&&"s"==t.pid})),(function(n){return i("li",{key:n.id},[i("i",{staticClass:"ion ion-ios-radio-button-on text-success"}),t._v(" Умение: "+t._s(n.name)+"\n                            "),i("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},t._l(t.nodes.filter((function(t){return"Знание"==t.type&&t.pid==n.id})),(function(n){return i("li",{key:n.id},[i("i",{staticClass:"ion ion-ios-radio-button-on text-warning"}),t._v(" Знание: "+t._s(n.name)+"\n                                ")])})),0)])})),0),t._v(" "),i("hr"),t._v(" "),i("h5",[t._v("Сквозные знания:")]),t._v(" "),i("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},t._l(t.nodes.filter((function(t){return"Знание"==t.type&&"th"==t.pid})),(function(n){return i("li",{key:n.id},[i("i",{staticClass:"ion ion-ios-radio-button-on text-warning"}),t._v(" Знание: "+t._s(n.name)+"\n                        ")])})),0)],2)])],1)],1)],1)]),t._v(" "),i("b-modal",{key:t.edit_item.id,ref:"modal",attrs:{id:"edit_modal",title:"Редактирование раздела в программе","ok-title":"Сохранить",size:"lg","cancel-title":"Закрыть"},on:{ok:t.handleEditOk}},[i("b-form-group",{attrs:{label:"Название раздела","invalid-feedback":"Необходимо ввести название","label-size":"lg"}},[i("b-form-textarea",{attrs:{rows:"3","max-rows":"6",required:""},model:{value:t.edit_item.name,callback:function(n){t.$set(t.edit_item,"name",n)},expression:"edit_item.name"}})],1)],1)],1)}),[],!1,null,null,null);n.default=l.exports},Z94T:function(t,n,i){"use strict";var e=i("WfUU"),s=i("ouQC"),a={name:"nsis",props:{ish_version_id:Number,mode:String},components:{NewNsi:e.a,EditNsi:s.a},data:function(){return{nn:"n",types:[],nsis:[],isBusy:!0,show_edit_window:!1,nsi_to_edit:0}},computed:{npas:function(){return this.nsis.filter((function(t){return 1==t.type_id}))},ychs:function(){return this.nsis.filter((function(t){return 2==t.type_id}))},irs:function(){return this.nsis.filter((function(t){return 3==t.type_id}))},ebss:function(){return this.nsis.filter((function(t){return 4==t.type_id}))}},methods:{add_nsi:function(t){self=this,axios.post("/nsis/add_nsi",{nsi_data:t.nsi_data,ish_version_id:this.ish_version_id}).then((function(t){alert("Источник добавлен!"),self.nn++,self.nsis.push(t.data)}))},update_nsi:function(t){axios.post("/nsis/update_nsi",{nsi_data:t.nsi_data}).then((function(n){alert("Источник обновлен!"),self.nsis=self.nsis.filter((function(n){return n.id!=t.nsi_data.id})),self.nsis.push(n.data),self.$bvModal.hide("modal-editnsi")}))},remove_nsi:function(t){var n=this;this.$bvModal.msgBoxConfirm("Действительно хотите источник?").then((function(i){1==i&&axios.post("/nsis/remove_nsi",{nsi_id:t}).then((function(t){return n.nsis=n.nsis.filter((function(n){return n.id!=t.data}))}))}))},edit_nsi:function(t){var n=this;this.nsi_to_edit=t,this.show_edit_window=!0,this.$nextTick((function(){n.$bvModal.show("modal-editnsi")}))}},mounted:function(){var t=this;self=this,axios.get("/nsis/nsi_types").then((function(n){return t.types=n.data})),axios.get("/nsis/"+self.ish_version_id).then((function(n){return t.nsis=n.data}))}},o=i("KHd+"),r=Object(o.a)(a,(function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[t.mode?t._e():i("div",[i("new-nsi",{key:t.nn,attrs:{types:t.types},on:{add_nsi:t.add_nsi}}),t._v(" "),i("hr")],1),t._v(" "),i("h5",[t._v("Текущие источники ("+t._s(t.nsis.length)+")")]),t._v(" "),t._l(t.types,(function(n){return i("div",{key:"t"+n.id},[i("h5",[t._v(t._s(n.name)+" ("+t._s(t.nsis.filter((function(t){return t.type_id==n.id})).length)+")")]),t._v(" "),i("b-list-group",t._l(t.nsis.filter((function(t){return t.type_id==n.id})),(function(n){return i("b-list-group-item",{key:n.id},[i("b-btn",{staticClass:"btn",attrs:{variant:"outline-primary icon-btn btn-xs"},on:{click:function(i){return i.preventDefault(),t.edit_nsi(n.id)}}},[i("i",{staticClass:"ion ion-md-create"})]),t._v(" "),t.mode?t._e():i("b-btn",{staticClass:"btn",attrs:{variant:"outline-danger icon-btn btn-xs"},on:{click:function(i){return t.remove_nsi(n.id)}}},[t._v("X")]),t._v("\n               "+t._s(n.name)+"\n            ")],1)})),1),t._v(" "),i("br")],1)}))],2),t._v(" "),t.show_edit_window?i("edit-nsi",{key:t.nsi_to_edit,attrs:{nsi_id:t.nsi_to_edit,types:t.types},on:{update_nsi:t.update_nsi}}):t._e()],1)}),[],!1,null,null,null);n.a=r.exports}}]);