(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"2wq+":function(e,t,n){var i=n("LbKx");"string"==typeof i&&(i=[[e.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,s);i.locals&&(e.exports=i.locals)},LbKx:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,'\n#tree {\r\n  width: 100%;\r\n  height: 100%;\n}\npath {\r\n  stroke: #000;\r\n  stroke-width: 2;\n}\n.node.competence rect {\r\n  fill: #040347;\n}\n.node.skill rect {\r\n  fill: #13465b;\n}\n.node.ability rect {\r\n  fill: #316950;\n}\n.node.knowledge rect {\r\n  fill: #dba94c;\n}\n.print_type {\r\n  text-transform: uppercase;\n}\ncircle {\r\n  stroke: #000;\n}\nline {\r\n  stroke: #000;\r\n  stroke-width: 2;\n}\n[control-export-menu] {\r\n  left: 100px;\r\n  top: 50px;\n}\n[data-id="search-icon"] {\r\n  left: 500px;\n}\r\n',""])},QQXb:function(e,t,n){"use strict";n("2wq+")},Zeex:function(e,t,n){"use strict";n.r(t);var i=n("oELJ"),s=n.n(i),l=n("xY7A"),a={name:"new-skill2",metaInfo:{title:"Добавить новый навык"},props:{parent_node:String,ish_version_id:Number},components:{NsiChoose:l.a},data:function(){return{new_skill:{keyword:"Владеть навыком",what:"",with:"",where:"",expert_answer:"",is_by_expert:null,valid:!0,nsis:[]},errors:[],isBusy:!0}},computed:{name:function(){return this.combine_text(this.new_skill)}},methods:{handle_ok:function(e){e.preventDefault(),0==this.new_skill.what.length||0==this.new_skill.with.length||0==this.new_skill.where.length?this.new_skill.valid=!1:(this.new_skill.valid=!0,this.$emit("add_skill",{skill_name:this.name,skill_data:this.new_skill,parent_node:this.parent_node}))},combine_text:function(e){return e.keyword+" "+e.what+" "+e.with+" "+e.where},change_nsi:function(e){this.new_skill.nsis=e.nsi_data},generate_id:function(){return"f".concat((~~(1e8*Math.random())).toString(16))}},mounted:function(){this.isBusy=!1}},o=n("KHd+"),r=Object(o.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{"no-close-on-esc":"","no-close-on-backdrop":"",id:"modal-newskill","ok-title":"Сохранить","cancel-title":"Закрыть",size:"xl",title:"Создание нового навыка"},on:{ok:e.handle_ok}},[n("p",[e._v("Parent: "+e._s(e.parent_node))]),e._v(" "),n("h4",[e._v("НАЗВАНИЕ НАВЫКА")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Заполните параметры названия компонента")]),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Ключевое слово"}},[n("b-form-input",{attrs:{disabled:"",required:"",placeholder:"Владеть навыком",value:"Владеть навыком"},model:{value:e.new_skill.keyword,callback:function(t){e.$set(e.new_skill,"keyword",t)},expression:"new_skill.keyword"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Каким?"}},[n("b-input",{attrs:{required:"",placeholder:"Каким?"},model:{value:e.new_skill.what,callback:function(t){e.$set(e.new_skill,"what",t)},expression:"new_skill.what"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"При помощи чего?"}},[n("b-input",{attrs:{required:"",placeholder:"При помощи чего?"},model:{value:e.new_skill.with,callback:function(t){e.$set(e.new_skill,"with",t)},expression:"new_skill.with"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"При каких условиях?"}},[n("b-input",{attrs:{required:"",placeholder:"При каких условиях?"},model:{value:e.new_skill.where,callback:function(t){e.$set(e.new_skill,"where",t)},expression:"new_skill.where"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Итоговое название"}},[n("p",[e._v(e._s(e.name))])])],1),e._v(" "),n("hr"),e._v(" "),n("h4",[e._v("ОБОСНОВАНИЕ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Выберите на основе какой информации формируется навык")]),e._v(" "),n("b-form-radio",{attrs:{name:"is_by_expert",value:"0"},model:{value:e.new_skill.is_by_expert,callback:function(t){e.$set(e.new_skill,"is_by_expert",t)},expression:"new_skill.is_by_expert"}},[e._v("На основе источников НСИ")]),e._v(" "),n("b-form-radio",{attrs:{name:"is_by_expert",value:"1"},model:{value:e.new_skill.is_by_expert,callback:function(t){e.$set(e.new_skill,"is_by_expert",t)},expression:"new_skill.is_by_expert"}},[e._v("На основе мнения эксперта")]),e._v(" "),0==e.new_skill.is_by_expert?n("div",{staticClass:"mt-4"},[n("h5",[e._v("ИСТОЧНИКИ НСИ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Соотнесите навык с источниками НСИ")]),e._v(" "),e.isBusy?e._e():n("nsi-choose",{attrs:{mode:"work",selected:[],ish_version_id:e.ish_version_id},on:{change_nsi:e.change_nsi}})],1):e._e(),e._v(" "),1==e.new_skill.is_by_expert?n("div",{staticClass:"mt-4"},[n("h5",[e._v("МНЕНИЕ ЭКСПЕРТА")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Введите комментарий, указав Ф.И.О. эксперта и его обоснование")]),e._v(" "),n("b-form-textarea",{attrs:{id:"textarea",placeholder:"Введите комментарий...",rows:"3","max-rows":"6"},model:{value:e.new_skill.expert_answer,callback:function(t){e.$set(e.new_skill,"expert_answer",t)},expression:"new_skill.expert_answer"}})],1):e._e(),e._v(" "),n("hr"),e._v(" "),e.new_skill.valid?e._e():n("b-alert",{attrs:{show:"",variant:"danger"}},[n("strong",[e._v("Ошибка!")]),e._v(" Заполните ВСЕ параметры названия компонента")])],1)],1)}),[],!1,null,null,null).exports,d={name:"new-ability2",metaInfo:{title:"Добавить новое умение"},props:{parent_node:String,ish_version_id:Number},components:{NsiChoose:l.a},data:function(){return{new_ability:{keyword:"Уметь",what:"",with:"",where:"",valid:!0,expert_answer:"",is_by_expert:null,nsis:[]},errors:[],isBusy:!0}},computed:{name:function(){return this.combine_text(this.new_ability)}},methods:{handle_ok:function(e){e.preventDefault(),0==this.new_ability.what.length||0==this.new_ability.with.length||0==this.new_ability.where.length?this.new_ability.valid=!1:(this.new_ability.valid=!0,this.$emit("add_ability",{ability_name:this.name,ability_data:this.new_ability,parent_node:this.parent_node}))},combine_text:function(e){return e.keyword+" "+e.what+" "+e.with+" "+e.where},change_nsi:function(e){this.new_ability.nsis=e.nsi_data}},mounted:function(){this.isBusy=!1}},_=Object(o.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{"no-close-on-esc":"","no-close-on-backdrop":"",id:"modal-newability","ok-title":"Сохранить","cancel-title":"Закрыть",size:"xl",title:"Создание нового умения"},on:{ok:e.handle_ok}},[n("p",[e._v("Parent: "+e._s(e.parent_node))]),e._v(" "),n("h4",[e._v("НАЗВАНИЕ УМЕНИЯ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Заполните параметры названия компонента")]),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Ключевое слово"}},[n("b-form-input",{attrs:{disabled:"",required:"",placeholder:"Уметь",value:"Уметь"},model:{value:e.new_ability.keyword,callback:function(t){e.$set(e.new_ability,"keyword",t)},expression:"new_ability.keyword"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Что?"}},[n("b-input",{attrs:{required:"",placeholder:"Что?"},model:{value:e.new_ability.what,callback:function(t){e.$set(e.new_ability,"what",t)},expression:"new_ability.what"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"При помощи чего?"}},[n("b-input",{attrs:{required:"",placeholder:"При помощи чего?"},model:{value:e.new_ability.with,callback:function(t){e.$set(e.new_ability,"with",t)},expression:"new_ability.with"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"При каких условиях?"}},[n("b-input",{attrs:{required:"",placeholder:"При каких условиях?"},model:{value:e.new_ability.where,callback:function(t){e.$set(e.new_ability,"where",t)},expression:"new_ability.where"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Итоговое название"}},[n("p",[e._v(e._s(e.name))])])],1),e._v(" "),n("hr"),e._v(" "),n("h4",[e._v("ОБОСНОВАНИЕ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Выберите на основе какой информации формируется умение")]),e._v(" "),n("b-form-radio",{attrs:{name:"is_by_expert",value:"0"},model:{value:e.new_ability.is_by_expert,callback:function(t){e.$set(e.new_ability,"is_by_expert",t)},expression:"new_ability.is_by_expert"}},[e._v("На основе источников НСИ")]),e._v(" "),n("b-form-radio",{attrs:{name:"is_by_expert",value:"1"},model:{value:e.new_ability.is_by_expert,callback:function(t){e.$set(e.new_ability,"is_by_expert",t)},expression:"new_ability.is_by_expert"}},[e._v("На основе мнения эксперта")]),e._v(" "),0==e.new_ability.is_by_expert?n("div",{staticClass:"mt-4"},[n("h5",[e._v("ИСТОЧНИКИ НСИ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Соотнесите навык с источниками НСИ")]),e._v(" "),e.isBusy?e._e():n("nsi-choose",{attrs:{mode:"work",selected:[],ish_version_id:e.ish_version_id},on:{change_nsi:e.change_nsi}})],1):e._e(),e._v(" "),1==e.new_ability.is_by_expert?n("div",{staticClass:"mt-4"},[n("h5",[e._v("МНЕНИЕ ЭКСПЕРТА")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Введите комментарий, указав Ф.И.О. эксперта и его обоснование")]),e._v(" "),n("b-form-textarea",{attrs:{id:"textarea",placeholder:"Введите комментарий...",rows:"3","max-rows":"6"},model:{value:e.new_ability.expert_answer,callback:function(t){e.$set(e.new_ability,"expert_answer",t)},expression:"new_ability.expert_answer"}})],1):e._e(),e._v(" "),n("hr"),e._v(" "),e.new_ability.valid?e._e():n("b-alert",{attrs:{show:"",variant:"danger"}},[n("strong",[e._v("Ошибка!")]),e._v(" Заполните ВСЕ параметры компонента")])],1)],1)}),[],!1,null,null,null).exports,c={name:"new-knowledge2",metaInfo:{title:"Добавить новое знание"},props:{parent_node:String,ish_version_id:Number,dtps:Array},components:{NsiChoose:l.a},data:function(){return{new_knowledge:{keyword:"Знать",what:"",with:" ",where:" ",dtp:"",valid:!0,expert_answer:"",is_by_expert:null,nsis:[]},errors:[],isBusy:!0}},computed:{name:function(){return this.combine_text(this.new_knowledge)}},methods:{handle_ok:function(e){e.preventDefault(),0==this.new_knowledge.what.length?this.new_knowledge.valid=!1:(this.new_knowledge.valid=!0,this.$emit("add_knowledge",{knowledge_name:this.name,knowledge_data:this.new_knowledge,parent_node:this.parent_node}))},combine_text:function(e){return e.keyword+" "+e.what+" "+e.with+" "+e.where},change_nsi:function(e){this.new_knowledge.nsis=e.nsi_data}},mounted:function(){this.isBusy=!1}},p=Object(o.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{"no-close-on-esc":"","no-close-on-backdrop":"",id:"modal-newknowledge","ok-title":"Сохранить","cancel-title":"Закрыть",size:"xl",title:"Создание нового знания"},on:{ok:e.handle_ok}},[n("p",[e._v("Parent: "+e._s(e.parent_node))]),e._v(" "),n("h4",[e._v("НАЗВАНИЕ ЗНАНИЯ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Заполните параметры названия компонента")]),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Ключевое слово"}},[n("b-form-input",{attrs:{disabled:"",required:"",placeholder:"Знать",value:"Знать"},model:{value:e.new_knowledge.keyword,callback:function(t){e.$set(e.new_knowledge,"keyword",t)},expression:"new_knowledge.keyword"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Что?"}},[n("b-input",{attrs:{required:"",placeholder:"Что?"},model:{value:e.new_knowledge.what,callback:function(t){e.$set(e.new_knowledge,"what",t)},expression:"new_knowledge.what"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Итоговое название"}},[n("p",[e._v(e._s(e.name))])])],1),e._v(" "),n("h4",[e._v("СООТВЕТСТВИЕ РАЗДЕЛУ ТИПОВОЙ СТРУКТУРЫ ДПП")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Выберите, какому разделу типовой структуры соответсвует данное знание")]),e._v(" "),e._l(e.dtps,(function(t){return n("b-form-radio",{key:"d"+t.id,attrs:{name:"dtps",value:t.id},model:{value:e.new_knowledge.dtp,callback:function(t){e.$set(e.new_knowledge,"dtp",t)},expression:"new_knowledge.dtp"}},[e._v(e._s(t.name))])})),e._v(" "),n("hr"),e._v(" "),n("h4",[e._v("ОБОСНОВАНИЕ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Выберите на основе какой информации формируется навык")]),e._v(" "),n("b-form-radio",{attrs:{name:"is_by_expert",value:"0"},model:{value:e.new_knowledge.is_by_expert,callback:function(t){e.$set(e.new_knowledge,"is_by_expert",t)},expression:"new_knowledge.is_by_expert"}},[e._v("На основе источников НСИ")]),e._v(" "),n("b-form-radio",{attrs:{name:"is_by_expert",value:"1"},model:{value:e.new_knowledge.is_by_expert,callback:function(t){e.$set(e.new_knowledge,"is_by_expert",t)},expression:"new_knowledge.is_by_expert"}},[e._v("На основе мнения эксперта")]),e._v(" "),0==e.new_knowledge.is_by_expert?n("div",{staticClass:"mt-4"},[n("h5",[e._v("ИСТОЧНИКИ НСИ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Соотнесите навык с источниками НСИ")]),e._v(" "),e.isBusy?e._e():n("nsi-choose",{attrs:{mode:"work",selected:[],ish_version_id:e.ish_version_id},on:{change_nsi:e.change_nsi}})],1):e._e(),e._v(" "),1==e.new_knowledge.is_by_expert?n("div",{staticClass:"mt-4"},[n("h5",[e._v("МНЕНИЕ ЭКСПЕРТА")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Введите комментарий, указав Ф.И.О. эксперта и его обоснование")]),e._v(" "),n("b-form-textarea",{attrs:{id:"textarea",placeholder:"Введите комментарий...",rows:"3","max-rows":"6"},model:{value:e.new_knowledge.expert_answer,callback:function(t){e.$set(e.new_knowledge,"expert_answer",t)},expression:"new_knowledge.expert_answer"}})],1):e._e(),e._v(" "),n("hr"),e._v(" "),e.new_knowledge.valid?e._e():n("b-alert",{attrs:{show:"",variant:"danger"}},[n("strong",[e._v("Ошибка!")]),e._v(" Заполните ВСЕ параметры названия компонента")])],2)],1)}),[],!1,null,null,null).exports,u={name:"new-competence2",props:{elems:Array},metaInfo:{title:"Сформировать компетенцию"},data:function(){return{new_competence:{keyword:"Способен",what:"",with:" ",where:" ",valid:!0,elems:[]},errors:[],isBusy:!0}},computed:{name:function(){return this.combine_text(this.new_competence)}},methods:{handle_ok:function(e){e.preventDefault(),0==this.new_competence.what.length||0==this.new_competence.with.length||0==this.new_competence.where.length?this.new_competence.valid=!1:(this.new_competence.valid=!0,this.$emit("add_competence",{competence_name:this.name,competence_data:this.new_competence}))},combine_text:function(e){return e.keyword+" "+e.what+" "+e.with+" "+e.where}}},h=Object(o.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{"no-close-on-esc":"","no-close-on-backdrop":"",id:"modal-newcompetence","ok-title":"Сформировать","cancel-title":"Закрыть",size:"xl",title:"Формирование новой компетенции"},on:{ok:e.handle_ok}},[n("h4",[e._v("НАЗВАНИЕ КОМПЕТЕНЦИИ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Заполните параметры названия компонента")]),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Ключевое слово"}},[n("b-form-input",{attrs:{disabled:"",required:"",placeholder:"Способен",value:"Способен"},model:{value:e.new_competence.keyword,callback:function(t){e.$set(e.new_competence,"keyword",t)},expression:"new_competence.keyword"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"На что?"}},[n("b-input",{attrs:{required:"",placeholder:"На что?"},model:{value:e.new_competence.what,callback:function(t){e.$set(e.new_competence,"what",t)},expression:"new_competence.what"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"При помощи чего?"}},[n("b-input",{attrs:{required:"",placeholder:"При помощи чего?"},model:{value:e.new_competence.with,callback:function(t){e.$set(e.new_competence,"with",t)},expression:"new_competence.with"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"При каких условиях?"}},[n("b-input",{attrs:{required:"",placeholder:"При каких условиях?"},model:{value:e.new_competence.where,callback:function(t){e.$set(e.new_competence,"where",t)},expression:"new_competence.where"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Итоговое название"}},[n("p",[e._v(e._s(e.name))])])],1),e._v(" "),n("hr"),e._v(" "),n("h4",[e._v("НАВЫКИ/УМЕНИЯ, КОТОРЫЕ ВОЙДУТ В КОМПЕТЕНЦИЮ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Выберите необходимые компоненты")]),e._v(" "),n("b-form-checkbox-group",{attrs:{id:"checkbox-group-4",options:e.elems,name:"elems","value-field":"id","text-field":"name",stacked:""},model:{value:e.new_competence.elems,callback:function(t){e.$set(e.new_competence,"elems",t)},expression:"new_competence.elems"}}),e._v(" "),n("hr"),e._v(" "),e.new_competence.valid?e._e():n("b-alert",{attrs:{show:"",variant:"danger"}},[n("strong",[e._v("Ошибка!")]),e._v(" Заполните ВСЕ параметры новой компетенции")])],1)],1)}),[],!1,null,null,null).exports,m={name:"add-parent2",props:{elems:Array,edit_elem:Object},data:function(){return{selected:"",errors:[]}},methods:{handle_ok:function(e){e.preventDefault(),this.errors=[],""==this.selected?this.errors.push("Выберите умение"):this.$emit("draw_parent",this.selected)}}},f=Object(o.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{"no-close-on-esc":"","no-close-on-backdrop":"",id:"modal-addparent","ok-title":"Добавить связь","cancel-title":"Закрыть",size:"xl",title:"Добавление дополнительной связи к знанию"},on:{ok:e.handle_ok}},[n("b-alert",{attrs:{show:""}},[e._v("Выберите умение, к которому добавить дополнительную связь от знания")]),e._v(" "),n("h5",[e._v("Знание:")]),e._v(" "),n("p",[e._v(e._s(e.edit_elem.name))]),e._v(" "),n("h5",[e._v("Умения:")]),e._v(" "),n("b-form-group",e._l(e.elems,(function(t){return n("b-form-radio",{key:t.id,attrs:{disabled:t.id==e.edit_elem.pid,name:"skills",value:t.id},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[e._v(e._s(t.name))])})),1),e._v(" "),n("hr"),e._v(" "),e.errors.length>0?n("b-alert",{attrs:{show:"",variant:"danger"}},[n("strong",[e._v("Ошибка!")]),e._v(" Выберите умение")]):e._e()],1)],1)}),[],!1,null,null,null).exports,w={name:"remove-parent2",props:{elems:Array,nodes:Array,edit_elem:Object},data:function(){return{selected:"",errors:[]}},methods:{handle_ok:function(e){e.preventDefault(),this.errors=[],""==this.selected?this.errors.push("Выберите умение"):this.$emit("erase_parent",this.selected)},print_name:function(e){return this.nodes.find((function(t){return t.id==e})).name}}},b=Object(o.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{"no-close-on-esc":"","no-close-on-backdrop":"",id:"modal-removeparent","ok-title":"Добавить связь","cancel-title":"Закрыть",size:"xl",title:"Удаление дополнительной связи знания"},on:{ok:e.handle_ok}},[n("b-alert",{attrs:{show:""}},[e._v("Выберите умение, от которого следует удалить дополнительную связь знания")]),e._v(" "),n("h5",[e._v("Знание:")]),e._v(" "),n("p",[e._v(e._s(e.edit_elem.name))]),e._v(" "),n("h5",[e._v("Умения:")]),e._v(" "),n("b-form-group",e._l(e.elems,(function(t){return n("b-form-radio",{key:t.to,attrs:{name:"abilities",value:t.to},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[e._v(e._s(e.print_name(t.to)))])})),1),e._v(" "),n("hr"),e._v(" "),e.errors.length>0?n("b-alert",{attrs:{show:"",variant:"danger"}},[n("strong",[e._v("Ошибка!")]),e._v(" Выберите умение")]):e._e()],1)],1)}),[],!1,null,null,null).exports,v={name:"edit-skill2",metaInfo:{title:"Редактирование навыка"},props:{ish_version_id:Number,edit_elem:String},components:{NsiChoose:l.a},data:function(){return{new_skill:{keyword:"Владеть навыком",what:"",with:"",where:"",valid:!0,expert_answer:"",is_by_expert:null,nsis:[]},errors:[],isBusy:!0}},computed:{name:function(){return this.combine_text(this.new_skill)}},methods:{handle_ok:function(e){e.preventDefault(),0==this.new_skill.what.length||0==this.new_skill.with.length||0==this.new_skill.where.length?this.new_skill.valid=!1:(this.new_skill.valid=!0,this.$emit("update_skill",{skill_name:this.name,skill_data:this.new_skill}))},combine_text:function(e){return e.keyword+" "+e.what+" "+e.with+" "+e.where},change_nsi:function(e){this.new_skill.nsis=e.nsi_data},generate_id:function(){return"f".concat((~~(1e8*Math.random())).toString(16))}},mounted:function(){var e=this;axios.get("/dpps/get_skill_info/"+this.edit_elem).then((function(t){return e.new_skill=t.data})).finally(this.isBusy=!1)}},g=Object(o.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{"no-close-on-esc":"","no-close-on-backdrop":"",id:"modal-editskill","ok-title":"Сохранить","cancel-title":"Закрыть",size:"xl",title:"Редактирование навыка"},on:{ok:e.handle_ok}},[n("h4",[e._v("НАЗВАНИЕ НАВЫКА")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Заполните параметры названия компонента")]),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Ключевое слово"}},[n("b-form-input",{attrs:{disabled:"",required:"",placeholder:"Владеть навыком",value:"Владеть навыком"},model:{value:e.new_skill.keyword,callback:function(t){e.$set(e.new_skill,"keyword",t)},expression:"new_skill.keyword"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Каким?"}},[n("b-input",{attrs:{required:"",placeholder:"Каким?"},model:{value:e.new_skill.what,callback:function(t){e.$set(e.new_skill,"what",t)},expression:"new_skill.what"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"При помощи чего?"}},[n("b-input",{attrs:{required:"",placeholder:"При помощи чего?"},model:{value:e.new_skill.with,callback:function(t){e.$set(e.new_skill,"with",t)},expression:"new_skill.with"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"При каких условиях?"}},[n("b-input",{attrs:{required:"",placeholder:"При каких условиях?"},model:{value:e.new_skill.where,callback:function(t){e.$set(e.new_skill,"where",t)},expression:"new_skill.where"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Итоговое название"}},[n("p",[e._v(e._s(e.name))])])],1),e._v(" "),n("hr"),e._v(" "),n("h4",[e._v("ОБОСНОВАНИЕ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Выберите на основе какой информации формируется навык")]),e._v(" "),n("b-form-radio",{attrs:{name:"is_by_expert",value:"0"},model:{value:e.new_skill.is_by_expert,callback:function(t){e.$set(e.new_skill,"is_by_expert",t)},expression:"new_skill.is_by_expert"}},[e._v("На основе источников НСИ")]),e._v(" "),n("b-form-radio",{attrs:{name:"is_by_expert",value:"1"},model:{value:e.new_skill.is_by_expert,callback:function(t){e.$set(e.new_skill,"is_by_expert",t)},expression:"new_skill.is_by_expert"}},[e._v("На основе мнения эксперта")]),e._v(" "),0==e.new_skill.is_by_expert?n("div",{staticClass:"mt-4"},[n("h5",[e._v("ИСТОЧНИКИ НСИ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Соотнесите навык с источниками НСИ")]),e._v(" "),e.isBusy?e._e():n("nsi-choose",{attrs:{mode:"work",selected:e.new_skill.nsis,ish_version_id:e.ish_version_id},on:{change_nsi:e.change_nsi}})],1):e._e(),e._v(" "),1==e.new_skill.is_by_expert?n("div",{staticClass:"mt-4"},[n("h5",[e._v("МНЕНИЕ ЭКСПЕРТА")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Введите комментарий, указав Ф.И.О. эксперта и его обоснование")]),e._v(" "),n("b-form-textarea",{attrs:{id:"textarea",placeholder:"Введите комментарий...",rows:"3","max-rows":"6"},model:{value:e.new_skill.expert_answer,callback:function(t){e.$set(e.new_skill,"expert_answer",t)},expression:"new_skill.expert_answer"}})],1):e._e(),e._v(" "),n("hr"),e._v(" "),e.new_skill.valid?e._e():n("b-alert",{attrs:{show:"",variant:"danger"}},[n("strong",[e._v("Ошибка!")]),e._v(" Заполните ВСЕ параметры названия компонента")])],1)],1)}),[],!1,null,null,null).exports,k={name:"edit-ability2",metaInfo:{title:"Редактирование умения"},props:{ish_version_id:Number,edit_elem:String},components:{NsiChoose:l.a},data:function(){return{new_ability:{keyword:"Уметь",what:"",with:"",where:"",expert_answer:"",is_by_expert:null,valid:!0,nsis:[]},errors:[],isBusy:!0}},computed:{name:function(){return this.combine_text(this.new_ability)}},methods:{handle_ok:function(e){e.preventDefault(),0==this.new_ability.what.length||0==this.new_ability.with.length||0==this.new_ability.where.length?this.new_ability.valid=!1:(this.new_ability.valid=!0,this.$emit("update_ability",{ability_name:this.name,ability_data:this.new_ability}))},combine_text:function(e){return e.keyword+" "+e.what+" "+e.with+" "+e.where},change_nsi:function(e){this.new_ability.nsis=e.nsi_data}},mounted:function(){var e=this;axios.get("/dpps/get_ability_info/"+this.edit_elem).then((function(t){return e.new_ability=t.data})).finally(this.isBusy=!1)}},y=Object(o.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{"no-close-on-esc":"","no-close-on-backdrop":"",id:"modal-editability","ok-title":"Сохранить","cancel-title":"Закрыть",size:"xl",title:"Редактирование умения"},on:{ok:e.handle_ok}},[n("h4",[e._v("НАЗВАНИЕ УМЕНИЯ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Заполните параметры названия компонента")]),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Ключевое слово"}},[n("b-form-input",{attrs:{disabled:"",required:"",placeholder:"Уметь",value:"Уметь"},model:{value:e.new_ability.keyword,callback:function(t){e.$set(e.new_ability,"keyword",t)},expression:"new_ability.keyword"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Что?"}},[n("b-input",{attrs:{required:"",placeholder:"Что?"},model:{value:e.new_ability.what,callback:function(t){e.$set(e.new_ability,"what",t)},expression:"new_ability.what"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"При помощи чего?"}},[n("b-input",{attrs:{required:"",placeholder:"При помощи чего?"},model:{value:e.new_ability.with,callback:function(t){e.$set(e.new_ability,"with",t)},expression:"new_ability.with"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"При каких условиях?"}},[n("b-input",{attrs:{required:"",placeholder:"При каких условиях?"},model:{value:e.new_ability.where,callback:function(t){e.$set(e.new_ability,"where",t)},expression:"new_ability.where"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Итоговое название"}},[n("p",[e._v(e._s(e.name))])])],1),e._v(" "),n("hr"),e._v(" "),n("h4",[e._v("ОБОСНОВАНИЕ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Выберите на основе какой информации формируется навык")]),e._v(" "),n("b-form-radio",{attrs:{name:"is_by_expert",value:"0"},model:{value:e.new_ability.is_by_expert,callback:function(t){e.$set(e.new_ability,"is_by_expert",t)},expression:"new_ability.is_by_expert"}},[e._v("На основе источников НСИ")]),e._v(" "),n("b-form-radio",{attrs:{name:"is_by_expert",value:"1"},model:{value:e.new_ability.is_by_expert,callback:function(t){e.$set(e.new_ability,"is_by_expert",t)},expression:"new_ability.is_by_expert"}},[e._v("На основе мнения эксперта")]),e._v(" "),0==e.new_ability.is_by_expert?n("div",{staticClass:"mt-4"},[n("h5",[e._v("ИСТОЧНИКИ НСИ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Соотнесите навык с источниками НСИ")]),e._v(" "),e.isBusy?e._e():n("nsi-choose",{attrs:{mode:"work",selected:e.new_ability.nsis,ish_version_id:e.ish_version_id},on:{change_nsi:e.change_nsi}})],1):e._e(),e._v(" "),1==e.new_ability.is_by_expert?n("div",{staticClass:"mt-4"},[n("h5",[e._v("МНЕНИЕ ЭКСПЕРТА")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Введите комментарий, указав Ф.И.О. эксперта и его обоснование")]),e._v(" "),n("b-form-textarea",{attrs:{id:"textarea",placeholder:"Введите комментарий...",rows:"3","max-rows":"6"},model:{value:e.new_ability.expert_answer,callback:function(t){e.$set(e.new_ability,"expert_answer",t)},expression:"new_ability.expert_answer"}})],1):e._e(),e._v(" "),n("hr"),e._v(" "),e.new_ability.valid?e._e():n("b-alert",{attrs:{show:"",variant:"danger"}},[n("strong",[e._v("Ошибка!")]),e._v(" Заполните ВСЕ параметры компонента")])],1)],1)}),[],!1,null,null,null).exports,x={name:"edit-knowledge2",metaInfo:{title:"Редактировать знание"},props:{ish_version_id:Number,edit_elem:String,dtps:Array},components:{NsiChoose:l.a},data:function(){return{new_knowledge:{keyword:"Знать",what:"",with:" ",where:" ",valid:!0,expert_answer:"",is_by_expert:null,nsis:[]},errors:[],isBusy:!0}},computed:{name:function(){return this.combine_text(this.new_knowledge)}},methods:{handle_ok:function(e){e.preventDefault(),0==this.new_knowledge.what.length?this.new_knowledge.valid=!1:(this.new_knowledge.valid=!0,this.$emit("update_knowledge",{knowledge_name:this.name,knowledge_data:this.new_knowledge,parent_node:this.parent_node}))},combine_text:function(e){return e.keyword+" "+e.what+" "+e.with+" "+e.where},change_nsi:function(e){this.new_knowledge.nsis=e.nsi_data}},mounted:function(){var e=this;axios.get("/dpps/get_knowledge_info/"+this.edit_elem).then((function(t){return e.new_knowledge=t.data})).finally(this.isBusy=!1)}},$=Object(o.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{"no-close-on-esc":"","no-close-on-backdrop":"",id:"modal-editknowledge","ok-title":"Сохранить","cancel-title":"Закрыть",size:"xl",title:"Редактирование знания"},on:{ok:e.handle_ok}},[n("h4",[e._v("НАЗВАНИЕ ЗНАНИЯ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Заполните параметры названия компонента")]),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Ключевое слово"}},[n("b-form-input",{attrs:{disabled:"",required:"",placeholder:"Знать",value:"Знать"},model:{value:e.new_knowledge.keyword,callback:function(t){e.$set(e.new_knowledge,"keyword",t)},expression:"new_knowledge.keyword"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Что?"}},[n("b-input",{attrs:{required:"",placeholder:"Что?"},model:{value:e.new_knowledge.what,callback:function(t){e.$set(e.new_knowledge,"what",t)},expression:"new_knowledge.what"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Итоговое название"}},[n("p",[e._v(e._s(e.name))])])],1),e._v(" "),n("h4",[e._v("СООТВЕТСТВИЕ РАЗДЕЛУ ТИПОВОЙ СТРУКТУРЫ ДПП")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Выберите, какому разделу типовой структуры соответсвует данное знание")]),e._v(" "),e._l(e.dtps,(function(t){return n("b-form-radio",{key:"d"+t.id,attrs:{name:"dtps",value:t.id},model:{value:e.new_knowledge.dtp,callback:function(t){e.$set(e.new_knowledge,"dtp",t)},expression:"new_knowledge.dtp"}},[e._v(e._s(t.name))])})),e._v(" "),n("hr"),e._v(" "),n("h4",[e._v("ОБОСНОВАНИЕ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Выберите на основе какой информации формируется навык")]),e._v(" "),n("b-form-radio",{attrs:{name:"is_by_expert",value:"0"},model:{value:e.new_knowledge.is_by_expert,callback:function(t){e.$set(e.new_knowledge,"is_by_expert",t)},expression:"new_knowledge.is_by_expert"}},[e._v("На основе источников НСИ")]),e._v(" "),n("b-form-radio",{attrs:{name:"is_by_expert",value:"1"},model:{value:e.new_knowledge.is_by_expert,callback:function(t){e.$set(e.new_knowledge,"is_by_expert",t)},expression:"new_knowledge.is_by_expert"}},[e._v("На основе мнения эксперта")]),e._v(" "),0==e.new_knowledge.is_by_expert?n("div",{staticClass:"mt-4"},[n("h5",[e._v("ИСТОЧНИКИ НСИ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Соотнесите навык с источниками НСИ")]),e._v(" "),e.isBusy?e._e():n("nsi-choose",{attrs:{mode:"work",selected:e.new_knowledge.nsis,ish_version_id:e.ish_version_id},on:{change_nsi:e.change_nsi}})],1):e._e(),e._v(" "),1==e.new_knowledge.is_by_expert?n("div",{staticClass:"mt-4"},[n("h5",[e._v("МНЕНИЕ ЭКСПЕРТА")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Введите комментарий, указав Ф.И.О. эксперта и его обоснование")]),e._v(" "),n("b-form-textarea",{attrs:{id:"textarea",placeholder:"Введите комментарий...",rows:"3","max-rows":"6"},model:{value:e.new_knowledge.expert_answer,callback:function(t){e.$set(e.new_knowledge,"expert_answer",t)},expression:"new_knowledge.expert_answer"}})],1):e._e(),e._v(" "),n("hr"),e._v(" "),e.new_knowledge.valid?e._e():n("b-alert",{attrs:{show:"",variant:"danger"}},[n("strong",[e._v("Ошибка!")]),e._v(" Заполните ВСЕ параметры названия компонента")])],2)],1)}),[],!1,null,null,null).exports,C={name:"edit-competence2",props:{edit_elem:String},metaInfo:{title:"Редактирование компетенцию"},data:function(){return{new_competence:{keyword:"Способен",what:"",with:" ",where:" ",valid:!0,elems:[]},errors:[],isBusy:!0}},computed:{name:function(){return this.combine_text(this.new_competence)}},methods:{handle_ok:function(e){e.preventDefault(),0==this.new_competence.what.length||0==this.new_competence.with.length||0==this.new_competence.where.length?this.new_competence.valid=!1:(this.new_competence.valid=!0,this.$emit("update_competence",{competence_name:this.name,competence_data:this.new_competence}))},combine_text:function(e){return e.keyword+" "+e.what+" "+e.with+" "+e.where}},mounted:function(){var e=this;axios.get("/dpps/get_competence_info/"+this.edit_elem).then((function(t){return e.new_competence=t.data})).finally(this.isBusy=!1)}},z=Object(o.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{"no-close-on-esc":"","no-close-on-backdrop":"",id:"modal-editcompetence","ok-title":"Сохранить","cancel-title":"Закрыть",size:"xl",title:"Редактирование компетенции"},on:{ok:e.handle_ok}},[n("h4",[e._v("НАЗВАНИЕ КОМПЕТЕНЦИИ")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("Заполните параметры названия компонента")]),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Ключевое слово"}},[n("b-form-input",{attrs:{disabled:"",required:"",placeholder:"Способен",value:"Способен"},model:{value:e.new_competence.keyword,callback:function(t){e.$set(e.new_competence,"keyword",t)},expression:"new_competence.keyword"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"На что?"}},[n("b-input",{attrs:{required:"",placeholder:"На что?"},model:{value:e.new_competence.what,callback:function(t){e.$set(e.new_competence,"what",t)},expression:"new_competence.what"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"При помощи чего?"}},[n("b-input",{attrs:{required:"",placeholder:"При помощи чего?"},model:{value:e.new_competence.with,callback:function(t){e.$set(e.new_competence,"with",t)},expression:"new_competence.with"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"При каких условиях?"}},[n("b-input",{attrs:{required:"",placeholder:"При каких условиях?"},model:{value:e.new_competence.where,callback:function(t){e.$set(e.new_competence,"where",t)},expression:"new_competence.where"}})],1)],1),e._v(" "),n("b-form-row",[n("b-form-group",{staticClass:"col",attrs:{"label-size":"lg","label-cols-lg":"2",label:"Итоговое название"}},[n("p",[e._v(e._s(e.name))])])],1),e._v(" "),n("hr"),e._v(" "),e.new_competence.valid?e._e():n("b-alert",{attrs:{show:"",variant:"danger"}},[n("strong",[e._v("Ошибка!")]),e._v(" Заполните ВСЕ параметры новой компетенции")])],1)],1)}),[],!1,null,null,null).exports,O=n("XhXj"),j={name:"order-children",props:{edit_elem:Object,zun_version:Number},components:{draggable:O.a},data:function(){return{elem:{},children:[]}},methods:{handle_ok:function(e){e.preventDefault(),this.$emit("update_order",this.children)}},mounted:function(){var e=this;axios.post("/dpps/"+this.zun_version+"/get_children",{elem_id:this.edit_elem.id,elem_type:this.edit_elem.tags[0]}).then((function(t){return e.children=t.data}))}},M=Object(o.a)(j,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{"no-close-on-esc":"","no-close-on-backdrop":"",id:"modal-orderchildren","ok-title":"Сохранить","cancel-title":"Закрыть",size:"xl",title:"Упорядочивание дочерних компонентов"},on:{ok:e.handle_ok}},[n("h5",[e._v("Родительский компонент: "+e._s(e.edit_elem.name))]),e._v(" "),n("h5",[e._v("Дочерние компоненты:")]),e._v(" "),n("b-alert",{attrs:{show:"",variant:"info"}},[n("span",[e._v("Установите правильную последовательность отображения компонентов. Вы можете поменять последовательность путем перетаскивания компонента (с помощью иконки "),n("i",{staticClass:"ion ion-ios-move m-r-1"}),e._v(").")])]),e._v(" "),n("draggable",e._b({staticClass:"sortable-example",attrs:{tag:"div"},model:{value:e.children,callback:function(t){e.children=t},expression:"children"}},"draggable",{animation:150,handle:".ion"},!1),e._l(e.children,(function(t){return n("div",{key:t.id,staticStyle:{"margin-bottom":"10px"}},[n("b-row",[n("b-col",{attrs:{sm:"1"}},[n("i",{staticClass:"ion ion-ios-move m-r-1",staticStyle:{"font-size":"35px"}}),e._v("  \n          ")]),e._v(" "),n("b-col",{attrs:{sm:"11"}},[e._v("\n            "+e._s(t.name)+"\n          ")])],1),e._v(" "),n("hr")],1)})),0)],1)],1)}),[],!1,null,null,null).exports,B=n("PSD3"),N=n.n(B),S={name:"zun2",metaInfo:{title:"Проектирование результатов"},data:function(){return{ns:"s",as:"a",ks:"k",cs:"c",edit_elem:{id:"0"},edit_type:"",nodes:[],links:[],parent_node:null,unattached_elems:[],stage:{},parts:[],errors:[],elems:[],isBusy:!0}},components:{OrgChart:s.a,NewSkill2:r,NewAbility2:_,NewKnowledge2:p,NewCompetence2:h,AddParent2:f,EditSkill2:g,EditAbility2:y,EditKnowledge2:$,EditCompetence2:z,RemoveParent2:b,OrderChildren:M,Swal:N.a},methods:{get_zun_versions_data:function(){var e=this;axios.get("/dpps/"+this.$route.params.dpp+"/get_links/"+this.stage.zun_version_id).then((function(t){return e.links=t.data})),axios.get("/dpps/"+this.$route.params.dpp+"/get_typology").then((function(t){return e.parts=t.data})),axios.get("/dpps/"+this.$route.params.dpp+"/get_zun_version_data2/"+this.stage.zun_version_id).then((function(t){return e.nodes=t.data})).finally((function(){return e.oc(e.$refs.tree,e.nodes)}))},oc:function(e,t){s.a.templates.comp_template=Object.assign({},s.a.templates.ula),s.a.templates.comp_template.size=[400,170],s.a.templates.comp_template.node='<rect x="0" y="0" fill= "#040347" width="400" height="160"  rx="5" ry="5"/>',s.a.templates.comp_template.link='<path stroke="#000000" stroke-width="1px" fill="none" link-id="[{id}][{child-id}]" d="M{xa},{ya} C{xb},{yb} {xc},{yc} {xd},{yd}" />',s.a.templates.comp_template.field_1='<foreignObject x="10" y="5" width="375" height="20"><span class="print_type text-white" style="margin:0px; line-height: 100%; font-weight:bolder;">{val}</span></foreignObject>',s.a.templates.comp_template.field_0='<foreignObject x="10" y="35" width="375" height="125"><p class="text-white" style="margin:0px; line-height: 100%;"> {val}</p></foreignObject>',s.a.templates.comp_template.nodeMenuButton='<foreignObject x="365" y="0" width="30" height="25" style="cursor:pointer;"><i class="ion ion-ios-more" control-node-menu-id="{id}" style="color: white; font-size: 30px;"></i></foreignObject>',s.a.templates.skil_template=Object.assign({},s.a.templates.ula),s.a.templates.skil_template.size=[400,170],s.a.templates.skil_template.link='<path stroke="#000000" stroke-width="2px" fill="none" link-id="[{id}][{child-id}]" d="M{xa},{ya} C{xb},{yb} {xc},{yc} {xd},{yd}" />',s.a.templates.skil_template.node='<rect x="0" y="0" fill= "#040347" width="400" height="160"  rx="5" ry="5"/>',s.a.templates.skil_template.field_1='<foreignObject x="10" y="5" width="390" height="50"><span class="print_type text-white" style="margin:0px; line-height: 100%; font-weight:bolder;">{val}</span></foreignObject>',s.a.templates.skil_template.field_0='<foreignObject x="10" y="35" width="390" height="125"><p class="text-white" style="margin:0px; line-height: 100%;"> {val}</p></foreignObject>',s.a.templates.skil_template.nodeMenuButton='<foreignObject x="365" y="0" width="30" height="25" style="cursor:pointer;"><i class="ion ion-ios-more" control-node-menu-id="{id}" style="color: white; font-size: 30px;"></i></foreignObject>',s.a.templates.abil_template=Object.assign({},s.a.templates.ula),s.a.templates.abil_template.size=[410,170],s.a.templates.abil_template.link='<path stroke="#000000" stroke-width="2px" fill="none" link-id="[{id}][{child-id}]" d="M{xa},{ya} C{xb},{yb} {xc},{yc} {xd},{yd}" />',s.a.templates.abil_template.node='<rect x="0" y="0" fill= "#040347" width="400" height="160"  rx="5" ry="5"/>',s.a.templates.abil_template.field_1='<foreignObject x="10" y="5" width="390" height="50"><span class="print_type text-white" style="margin:0px; line-height: 100%; font-weight:bolder;">{val}</span></foreignObject>',s.a.templates.abil_template.field_0='<foreignObject x="10" y="35" width="390" height="125"><p class="text-white" style="margin:0px; line-height: 100%;"> {val}</p></foreignObject>',s.a.templates.abil_template.nodeMenuButton='<foreignObject x="365" y="0" width="30" height="25" style="cursor:pointer;"><i class="ion ion-ios-more" control-node-menu-id="{id}" style="color: white; font-size: 30px;"></i></foreignObject>',s.a.templates.know_template=Object.assign({},s.a.templates.ula),s.a.templates.know_template.size=[400,110],s.a.templates.know_template.nodeMenuButton='<foreignObject x="365" y="0" width="30" height="25" control-node-menu-id="{id}" style="cursor:pointer;"><i class="ion ion-ios-more"  style="color: white; font-size: 30px;"></i></foreignObject>',s.a.templates.know_template.link='<path stroke="#000000" stroke-width="2px" fill="none" link-id="[{id}][{child-id}]" d="M{xa},{ya} C{xb},{yb} {xc},{yc} {xd},{yd}" />',s.a.templates.know_template.node='<rect x="0" y="0" fill= "#040347" width="400" height="100"  rx="5" ry="5"/>',s.a.templates.know_template.field_1='<foreignObject x="10" y="5" width="390" height="50"><span class="print_type text-white" style="margin:0px; line-height: 100%; font-weight:bolder;">{val}</span></foreignObject>',s.a.templates.know_template.field_0='<foreignObject x="10" y="35" width="390" height="70"><p class="text-white" style="margin:0px; line-height: 100%;"> {val}</p></foreignObject>',s.a.templates.through_template=Object.assign({},s.a.templates.ula),s.a.templates.through_template.size=[400,110],s.a.templates.through_template.node='<rect x="0" y="0" fill= "#B15124" width="400" height="100"  rx="5" ry="5"/>',s.a.templates.through_template.field_1="",s.a.templates.through_template.field_0='<foreignObject x="100" y="40" width="390" height="70"><p class="" style="font-size:20px; color: white; line-height: 100%;"> {val}</p></foreignObject>',s.a.templates.through_template.nodeMenuButton='<foreignObject x="365" y="0" width="30" height="25" control-node-menu-id="{id}" style="cursor:pointer;"><i class="ion ion-ios-more"  style="color: white; font-size: 30px;"></i></foreignObject>';for(var n=0;n<this.nodes.length;n++){var i=this.nodes[n];switch(i.type){case"Компетенция":i.tags=["competence"];break;case"Навык":i.tags=["skill"];break;case"Умение":i.tags=["ability"];break;case"Знание":i.tags=["knowledge"];break;case"Сквозные знания":i.tags=["through"]}}for(n=0;n<this.nodes.length;n++)0==this.nodes[n].valid&&(this.nodes[n].type="<span class='btn btn-danger btn-xs'><strong style='font-size:16px;'>!</strong></span> "+this.nodes[n].type);self=this,this.chart=new s.a(e,{nodes:t,template:"ula",enableDragDrop:!0,nodeMouseClick:null,slinks:this.links,showXScroll:s.a.scroll.visible,showYScroll:s.a.scroll.visible,lazyLoading:!1,orderBy:"position",zoom:{speed:30,smooth:10},nodeBinding:{field_0:"name",field_1:"type"},scaleInitial:s.a.match.boundary,nodeMenu:{},toolbar:{layout:!0,zoom:!0,fit:!0,expandAll:!1},layout:s.a.treeRightOffset,tags:{competence:{nodeMenu:{create_skill:{text:"Добавить навык",icon:'<i class="fas fa-user-plus"></i>',onClick:function(e){self.create_skill(e)}},create_ability:{text:"Добавить умение",icon:'<i class="fas fa-user-plus"></i>',onClick:function(e){self.create_ability(e)}},edit_competence:{text:"Редактировать",icon:'<i class="fas fa-edit"></i>',onClick:function(e){self.edit_competence(e)}},delete_competence:{text:"Удалить компетенцию",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.delete_competence(e)}},order_children:{text:"Упорядочить дочерние компоненты",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.order_children(e)}},export_node:{text:"Экспорт",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.export_node(e)}}},template:"comp_template"},skill:{nodeMenu:{create_ability:{text:"Добавить умение",icon:'<i class="fas fa-user-plus"></i>',onClick:function(e){self.create_ability(e)}},edit_skill:{text:"Редактировать навык",icon:'<i class="fas fa-user-plus"></i>',onClick:function(e){self.edit_skill(e)}},delete_skill:{text:"Удалить навык",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.delete_skill(e)}},disconnect:{text:"Отсоединить",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.disconnect(e)}},order_children:{text:"Упорядочить умения",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.order_children(e)}},export_node:{text:"Экспорт",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.export_node(e)}}},template:"skil_template"},ability:{nodeMenu:{create_knowledge:{text:"Добавить знание",icon:'<i class="fas fa-user-plus"></i>',onClick:function(e){self.create_knowledge(e)}},edit_ability:{text:"Редактировать умение",icon:'<i class="fas fa-user-plus"></i>',onClick:function(e){self.edit_ability(e)}},delete_ability:{text:"Удалить умение",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.delete_ability(e)}},disconnect:{text:"Отсоединить",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.disconnect(e)}},order_children:{text:"Упорядочить знания",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.order_children(e)}},export_node:{text:"Экспорт",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.export_node(e)}}},template:"abil_template"},knowledge:{nodeMenu:{edit_knowledge:{text:"Редактировать знание",icon:'<i class="fas fa-user-plus"></i>',onClick:function(e){self.edit_knowledge(e)}},delete_knowledge:{text:"Удалить знание",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.delete_knowledge(e)}},add_parent:{text:"Добавить дополнительную связь",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.add_parent(e)}},remove_parent:{text:"Удалить дополнительную связь",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.remove_parent(e)}},disconnect:{text:"Отсоединить",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.disconnect(e)}}},template:"know_template"},through:{nodeMenu:{create_knowledge:{text:"Добавить знание",icon:'<i class="fas fa-user-plus"></i>',onClick:function(e){self.create_knowledge(e)}},order_children:{text:"Упорядочить знания",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.order_children(e)}},export_node:{text:"Экспорт",icon:'<i class="fas fa-user-minus"></i>',onClick:function(e){self.export_node(e)}}},template:"through_template"}}}),this.isBusy=!1,this.chart.on("exportstart",(function(e,t){t.content+="<style>.node.competence rect {fIll:#fff; stroke: #000;stroke-width: 2;}.node.skill rect {fIll:#fff; stroke: #000;stroke-width: 2;}.node.ability rect {fIll:#fff; stroke: #000;stroke-width: 2;}.node.knowledge rect {fIll:#fff; stroke: #000;stroke-width: 2;}p {color: #000; line-height: 100%;}</style>"})),this.chart.on("drop",(function(e,t,n){var i=self.nodes.find((function(e){return e.id==t})),s=self.nodes.find((function(e){return e.id==n})),l=i.type.replace("<span class='btn btn-danger btn-xs'><strong style='font-size:16px;'>!</strong></span> ",""),a=s.type.replace("<span class='btn btn-danger btn-xs'><strong style='font-size:16px;'>!</strong></span> ","");if(l==a)return alert("Ошибка! Невозможно добавить элемент к элементу того же типа"),!1;if("Компетенция"==l)return alert("Ошибка! Компетенцию нельзя присоединить к другому элементу"),!1;if("Знание"==a)return alert("Ошибка! Невозможно добавить элемент к элементу типа «Знание»"),!1;if("Сквозные знания"==a&&"Знание"!=l)return alert("Ошибка! Сквозным может быть только знание"),!1;if("Навык"==a&&"Знание"==l)return alert("Ошибка! Знание не может принадлежать навыку"),!1;if("Сквозные знания"==l)return alert("Ошибка! Невозможно переместить сквозные знания"),!1;if("Компетенция"==a){var o=self.nodes.filter((function(e){return e.pid==s.id})),r=o.filter((function(e){return e.type.includes("Навык")})),d=o.filter((function(e){return e.type.includes("Умение")}));if("Умение"==l&&r.length>0)return alert("Ошибка! Невозможно присоединить умение к компетенции, так как она уже содержит навыки."),!1;if("Навык"==l&&d.length>0)return alert("Ошибка! Невозможно присоединить навык к компетенции, так как она уже содержит умения."),!1;if("Знание"==l)return alert("Ошибка! Невозможно присоединить знание к компетенции."),!1}return"Навык"==l&&"Умение"==a?(alert("Ошибка! Невозможно присоединить навык к умению"),!1):(axios.post("/dpps/"+self.$route.params.dpp+"/move_elem",{elem_type:l,elem_id:i.id,to_type:a,to_id:s.id}),!0)}))},create_skill:function(e){if(this.parent_node=e,self.nodes.filter((function(t){return t.pid==e})).filter((function(e){return e.type.includes("Умение")})).length>0)return alert("Ошибка! Невозможно добавить навык к компетенции, так как она уже содержит умения."),!1;this.$bvModal.show("modal-newskill")},add_skill:function(e){self=this,axios.post("/dpps/"+this.$route.params.dpp+"/add_skill",{zun_version:this.stage.zun_version_id,skill_data:e.skill_data,parent_node:e.parent_node,skill_name:e.skill_name}).then((function(e){if(1==e.data.valid)var t="Навык";else t="<span class='btn btn-danger btn-xs'><strong style='font-size:16px;'>!</strong></span> Навык";self.chart.addNode({id:e.data.new_id,pid:e.data.new_parent,name:e.data.name,valid:e.data.valid,type:t,tags:["skill"]}),self.chart.center(e.data.new_id)})).finally((function(){self.$bvModal.hide("modal-newskill"),self.ns=self.ns+1}))},delete_skill:function(e){var t=this;self=this;var n=this.nodes.find((function(t){return t.id==e}));this.nodes.filter((function(e){return e.pid==n.id})).length>0?alert("Невозможно удалить навык, так как к нему привязаны другие элементы. Сначала необходимо удалить их или перенести."):this.$bvModal.msgBoxConfirm("Действительно хотите удалить навык «"+n.name+"»?").then((function(n){!0===n&&axios.post("/dpps/"+t.$route.params.dpp+"/remove_skill",{skill_id:e}).then((function(n){return t.chart.removeNode(e)})).finally((function(){}))}))},edit_skill:function(e){var t=this;this.edit_elem=this.nodes.find((function(t){return t.id==e})),this.edit_type="skill",this.$nextTick((function(){t.$bvModal.show("modal-editskill")}))},update_skill:function(e){self=this,axios.post("/dpps/"+this.$route.params.dpp+"/update_skill",{skill_data:e.skill_data,skill_name:e.skill_name}).then((function(e){var t=self.nodes.find((function(t){return t.id==e.data.new_id}));t.name=e.data.name,t.valid=e.data.valid,1==e.data.valid?t.type="Навык":t.type="<span class='btn btn-danger btn-xs'><strong style='font-size:16px;'>!</strong></span> Навык",self.chart.center(e.data.new_id)})).finally((function(){self.$bvModal.hide("modal-editskill")}))},create_ability:function(e){if(this.parent_node=e,self.nodes.filter((function(t){return t.pid==e})).filter((function(e){return e.type.includes("Навык")})).length>0)return alert("Ошибка! Невозможно добавить умение к компетенции, так как она уже содержит навыки."),!1;this.$bvModal.show("modal-newability")},add_ability:function(e){self=this;var t=self.nodes.find((function(t){return t.id==e.parent_node}));if(console.log(t),t){if("skill"==t.tags)var n="skill";if("competence"==t.tags)n="competence"}else n="no";axios.post("/dpps/"+this.$route.params.dpp+"/add_ability",{zun_version:this.stage.zun_version_id,ability_data:e.ability_data,parent_node:e.parent_node,parent_type:n,ability_name:e.ability_name}).then((function(e){if(1==e.data.valid)var t="Умение";else t="<span class='btn btn-danger btn-xs'><strong style='font-size:16px;'>!</strong></span> Умение";self.chart.addNode({id:e.data.new_id,pid:e.data.new_parent,name:e.data.name,valid:e.data.valid,type:t,tags:["ability"]}),self.chart.center(e.data.new_id)})).finally((function(){self.$bvModal.hide("modal-newability"),self.as=self.as+1}))},edit_ability:function(e){var t=this;this.edit_elem=this.nodes.find((function(t){return t.id==e})),this.edit_type="ability",this.$nextTick((function(){t.$bvModal.show("modal-editability")}))},update_ability:function(e){self=this,axios.post("/dpps/"+this.$route.params.dpp+"/update_ability",{ability_data:e.ability_data,ability_name:e.ability_name}).then((function(e){var t=self.nodes.find((function(t){return t.id==e.data.new_id}));t.name=e.data.name,t.valid=e.data.valid,1==e.data.valid?t.type="Умение":t.type="<span class='btn btn-danger btn-xs'><strong style='font-size:16px;'>!</strong></span> Умение",self.chart.center(e.data.new_id)})).finally((function(){self.$bvModal.hide("modal-editability")}))},delete_ability:function(e){var t=this;self=this;var n=this.nodes.find((function(t){return t.id==e}));this.nodes.filter((function(e){return e.pid==n.id})).length>0?alert("Невозможно удалить умение, так как к нему привязаны другие элементы. Сначала необходимо удалить их или перенести."):this.$bvModal.msgBoxConfirm("Действительно хотите удалить умение «"+n.name+"»?").then((function(n){!0===n&&axios.post("/dpps/"+t.$route.params.dpp+"/remove_ability",{ability_id:e}).then((function(n){return t.chart.removeNode(e)})).finally((function(){}))}))},create_knowledge:function(e){this.parent_node=e,this.$bvModal.show("modal-newknowledge")},add_knowledge:function(e){self=this,axios.post("/dpps/"+this.$route.params.dpp+"/add_knowledge",{zun_version:this.stage.zun_version_id,knowledge_data:e.knowledge_data,parent_node:e.parent_node,knowledge_name:e.knowledge_name}).then((function(e){if(1==e.data.valid)var t="Знание";else t="<span class='btn btn-danger btn-xs'><strong style='font-size:16px;'>!</strong></span> Знание";self.chart.addNode({id:e.data.new_id,pid:e.data.new_parent,name:e.data.name,type:t,valid:e.data.valid,tags:["knowledge"]}),self.chart.center(e.data.new_id)})).finally((function(){self.$bvModal.hide("modal-newknowledge"),self.ks=self.ks+1})),axios.get("/dpps/"+this.$route.params.dpp+"/get_typology").then((function(e){return self.parts=e.data}))},delete_knowledge:function(e){var t=this;self=this;var n=this.nodes.find((function(t){return t.id==e}));this.nodes.filter((function(e){return e.pid==n.id})).length>0?alert("Невозможно удалить умение, так как к нему привязаны другие элементы. Сначала необходимо удалить их или перенести."):this.$bvModal.msgBoxConfirm("Действительно хотите удалить знание «"+n.name+"»?").then((function(n){!0===n&&axios.post("/dpps/"+t.$route.params.dpp+"/remove_knowledge",{knowledge_id:e}).then((function(n){return t.chart.removeNode(e)})).finally((function(){}))}))},edit_knowledge:function(e){var t=this;this.edit_elem=this.nodes.find((function(t){return t.id==e})),this.edit_type="knowledge",this.$nextTick((function(){t.$bvModal.show("modal-editknowledge")}))},update_knowledge:function(e){self=this,axios.post("/dpps/"+this.$route.params.dpp+"/update_knowledge",{knowledge_data:e.knowledge_data,knowledge_name:e.knowledge_name}).then((function(e){var t=self.nodes.find((function(t){return t.id==e.data.new_id}));t.name=e.data.name,t.valid=e.data.valid,1==e.data.valid?t.type="Знание":t.type="<span class='btn btn-danger btn-xs'><strong style='font-size:16px;'>!</strong></span> Знание",self.chart.center(e.data.new_id)})).finally((function(){self.$bvModal.hide("modal-editknowledge")})),axios.get("/dpps/"+this.$route.params.dpp+"/get_typology").then((function(e){return self.parts=e.data}))},disconnect:function(e){self=this;var t=self.nodes.find((function(t){return t.id==e}));t.type=t.type.replace("<span class='btn btn-danger btn-xs'><strong style='font-size:16px;'>!</strong></span> ",""),axios.post("/dpps/"+this.$route.params.dpp+"/disconnect",{elem:t}).then((function(e){return t.pid=null})).finally((function(){self.chart.draw(s.a.action.init),self.chart.center(e)}))},generate_id:function(){return"f".concat((~~(1e8*Math.random())).toString(16))},set_width:function(e){return console.log(e),400},make_competence:function(){var e=this.nodes.filter((function(e){return null==e.pid||"c"==e.pid||"s"==e.pid}));e=(e=e.filter((function(e){return"Сквозные знания"!=e.type}))).filter((function(e){return"Компетенция"!=e.type})),this.unattached_elems=e,this.$bvModal.show("modal-newcompetence")},add_competence:function(e){self=this,axios.post("/dpps/"+this.$route.params.dpp+"/add_competence",{zun_version:this.stage.zun_version_id,competence_data:e.competence_data,competence_name:e.competence_name}).then((function(t){self.chart.addNode({id:t.data.new_id,pid:null,name:t.data.name,valid:!0,type:"Компетенция",tags:["competence"]});for(var n=0;n<e.competence_data.elems.length;n++){console.log(e.competence_data.elems[n]);var i=self.nodes.find((function(t){return t.id==e.competence_data.elems[n]}));self.chart.updateNode({id:i.id,type:i.type,tags:i.tags,name:i.name,pid:t.data.new_id})}self.chart.center(t.data.new_id),self.$bvModal.hide("modal-newcompetence")}))},delete_competence:function(e){var t=this;self=this;var n=this.nodes.find((function(t){return t.id==e}));this.nodes.filter((function(e){return e.pid==n.id})).length>0?alert("Невозможно удалить компетенцию, так как к ней привязаны другие элементы. Сначала необходимо удалить их или перенести."):this.$bvModal.msgBoxConfirm("Действительно хотите удалить компетенцию «"+n.name+"»?").then((function(n){!0===n&&axios.post("/dpps/"+t.$route.params.dpp+"/remove_competence",{competence_id:e}).then((function(n){return t.chart.removeNode(e)})).finally((function(){}))}))},edit_competence:function(e){var t=this;this.edit_elem=this.nodes.find((function(t){return t.id==e})),this.edit_type="competence",this.$nextTick((function(){t.$bvModal.show("modal-editcompetence")}))},update_competence:function(e){self=this,axios.post("/dpps/"+this.$route.params.dpp+"/update_competence",{competence_data:e.competence_data,competence_name:e.competence_name}).then((function(e){self.nodes.find((function(t){return t.id==e.data.new_id})).name=e.data.name,self.chart.center(e.data.new_id)})).finally((function(){self.$bvModal.hide("modal-editcompetence")}))},remove_parent:function(e){var t=this;this.edit_elem=this.nodes.find((function(t){return t.id==e})),this.edit_type="remove_parent",this.$nextTick((function(){t.$bvModal.show("modal-removeparent")}))},add_parent:function(e){var t=this;this.edit_elem=this.nodes.find((function(t){return t.id==e})),this.edit_type="parent",this.$nextTick((function(){t.$bvModal.show("modal-addparent")}))},draw_parent:function(e){var t=this;axios.post("/dpps/"+this.$route.params.dpp+"/add_knowledge_link",{knowledge_id:this.edit_elem.id,ability_id:e}).then((function(n){t.chart.addSlink(t.edit_elem.id,e,"","blue"),t.$bvModal.hide("modal-addparent"),t.chart.draw(s.a.action.init)}))},erase_parent:function(e){var t=this;axios.post("/dpps/"+this.$route.params.dpp+"/remove_knowledge_link",{knowledge_id:this.edit_elem.id,ability_id:e}).then((function(n){t.chart.removeSlink(t.edit_elem.id,e),t.$bvModal.hide("modal-removeparent"),t.chart.draw(s.a.action.init)})).finally((function(e){N.a.fire("Успех!","Дополнительная связь удалена","success")}))},order_children:function(e){var t=this;this.edit_elem=this.nodes.find((function(t){return t.id==e})),this.$nextTick((function(){t.$bvModal.show("modal-orderchildren")}))},update_order:function(e){var t=this;self=this,axios.post("/dpps/"+this.$route.params.dpp+"/update_order",{edit_elem:this.edit_elem,children:e}).then((function(t){for(var n=0;n<e.length;n++)self.nodes.find((function(t){t.name==e[n].name&&(t.position=n+1)}))})).finally((function(){return t.chart.draw(s.a.action.init)})),self.$nextTick((function(){self.edit_elem={id:0},self.$bvModal.hide("modal-orderchildren")}))},check_stage:function(){this.errors=[];for(var e=0;e<this.parts.length;e++)0==this.parts[e].knowledges.length&&this.errors.push("К типовому разделу содержания «"+this.parts[e].name+" не прикреплено ни одного знания»");for(e=0;e<this.nodes.length;e++)0==this.nodes[e].valid&&this.errors.push("Не заполнен элемент «"+this.nodes[e].name+"»");0==this.errors.length&&this.go_forward()},go_forward:function(){var e=this;axios.post("/dpps/"+this.$route.params.dpp+"/"+this.stage.id+"/go_next").then((function(){return e.$router.push("/my_dpps/"+e.$route.params.dpp+"/overview/1")}))},export_node:function(e){this.chart.exportPNG({filename:"MyOrgChart.png",nodeId:e,openInNewTab:!1,expandChildren:!0,margin:[10,20,10,20],header:"Экспорт"})}},mounted:function(){var e=this;axios.get("/dpps/"+this.$route.params.dpp+"/get_stage_data/"+this.$route.params.stage).then((function(t){return e.stage=t.data})).finally((function(){return e.get_zun_versions_data()}))}},q=(n("QQXb"),Object(o.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("Назад")]),e._v(" "),n("hr"),e._v(" "),n("h4",[e._v("Проектирование результатов")]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-4"},[n("h5",[e._v("Статистика результатов:")]),e._v(" "),n("ul",[n("li",[e._v("Компетенций: "+e._s(e.nodes.filter((function(e){return"competence"==e.tags})).length)+" (не заполнено "+e._s(e.nodes.filter((function(e){return"competence"==e.tags&&0==e.valid})).length)+" )")]),e._v(" "),n("li",[e._v("Навыков: "+e._s(e.nodes.filter((function(e){return"skill"==e.tags})).length)+" (не заполнено "+e._s(e.nodes.filter((function(e){return"skill"==e.tags&&0==e.valid})).length)+" )")]),e._v(" "),n("li",[e._v("Умений: "+e._s(e.nodes.filter((function(e){return"ability"==e.tags})).length)+" (не заполнено "+e._s(e.nodes.filter((function(e){return"ability"==e.tags&&0==e.valid})).length)+" )")]),e._v(" "),n("li",[e._v("Знаний: "+e._s(e.nodes.filter((function(e){return"knowledge"==e.tags})).length)+" (не заполнено "+e._s(e.nodes.filter((function(e){return"knowledge"==e.tags&&0==e.valid})).length)+" )")]),e._v(" "),n("li",[e._v("Из них сквозных знаний: "+e._s(e.nodes.filter((function(e){return 0==e.pid})).length)+" (не заполнено "+e._s(e.nodes.filter((function(e){return 0==e.pid&&0==e.valid})).length)+" )")])])]),e._v(" "),n("div",{staticClass:"col-md-8"},[n("h5",[n("span",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Кликните по названию раздела, чтобы узнать, какие знания входят в него",expression:"'Кликните по названию раздела, чтобы узнать, какие знания входят в него'",modifiers:{hover:!0,top:!0}}],staticClass:"text-primary",staticStyle:{"font-size":"20px"},attrs:{title:"Подсказка"}},[n("i",{staticClass:"ion ion-md-information-circle-outline"})]),e._v("\n          Типовое содержание ДПП:\n      ")]),e._v(" "),n("div",e._l(e.parts,(function(t){return n("b-card",{key:"part_"+t.id,staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"pt-1 pb-1"},[n("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"accordion_"+t.id,expression:"'accordion_'+part.id"}],staticClass:"text-body",attrs:{href:"javascript:void(0)"}},[0==t.knowledges.length?n("i",{staticClass:"ion ion-md-folder"}):e._e(),e._v(" "),0!=t.knowledges.length?n("i",{staticClass:"ion ion-md-folder text-success"}):e._e(),e._v("\n              "+e._s(t.name)+" (Знаний: "+e._s(t.knowledges.length)+")\n          ")])]),e._v(" "),n("b-collapse",{attrs:{id:"accordion_"+t.id,accordion:"accordion"}},[n("b-card-body",{staticClass:"p-1"},[n("ul",e._l(t.knowledges,(function(t){return n("li",{key:"kd"+t.id},[e._v(e._s(t.name))])})),0)])],1)],1)})),1)])]),e._v(" "),n("div",[n("b-dropdown",{staticClass:"m-md-2",attrs:{id:"dropdown-1",text:"Добавить компонент"}},[n("b-dropdown-item",{on:{click:function(t){return e.create_skill("root")}}},[e._v("Добавить навык")]),e._v(" "),n("b-dropdown-item",{on:{click:function(t){return e.create_ability("root")}}},[e._v("Добавить умение")]),e._v(" "),n("b-dropdown-item",{on:{click:function(t){return e.make_competence("root")}}},[e._v("Сформировать компетенцию")])],1),e._v(" "),n("b-dropdown",{staticClass:"m-md-2",attrs:{id:"dropdown-2",text:"Экспорт"}},[n("b-dropdown-item",{on:{click:function(t){return e.chart.exportPDF({filename:"My.pdf"})}}},[e._v("Экспорт в PDF")]),e._v(" "),n("b-dropdown-item",{on:{click:function(t){return e.chart.exportPNG({filename:"My.png"})}}},[e._v("Экспорт в PNG")]),e._v(" "),n("b-dropdown-item",{attrs:{href:"/dpps/"+this.$route.params.dpp+"/export_zun/"+this.stage.zun_version_id}},[e._v("Экспорт в Word")])],1),e._v(" "),n("span",{staticClass:"btn btn-success",on:{click:function(t){return e.check_stage()}}},[e._v("Согласовать результаты и перейти к следующему этапу")])],1),e._v(" "),e.errors.length>0?n("b-alert",{attrs:{show:"",dismissible:"",variant:"danger"}},[n("strong",[e._v("Обнаружены ошибки:")]),e._v(" "),n("ul",e._l(e.errors,(function(t,i){return n("li",{key:i},[e._v(e._s(t))])})),0)]):e._e(),e._v(" "),n("div"),e._v(" "),n("div",[n("b-card",{attrs:{"no-body":""}},[n("b-tabs",{attrs:{card:""}},[n("b-tab",{attrs:{title:"В виде графа",active:""}},[n("div",{ref:"tree",attrs:{id:"tree"}})]),e._v(" "),n("b-tab",{attrs:{title:"В виде списка"}},[e.isBusy?e._e():n("div",[n("h5",[e._v("Сформированные компетенции")]),e._v(" "),e._l(e.nodes.filter((function(e){return"Компетенция"==e.type})),(function(t){return n("div",{key:t.id},[n("h5",[n("i",{staticClass:"ion ion-ios-radio-button-on text-primary"}),e._v(" Компетенция: "+e._s(t.name))]),e._v(" "),n("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},e._l(e.nodes.filter((function(e){return e.type.includes("Навык")&&e.pid==t.id})),(function(t){return n("li",{key:t.id},[n("i",{staticClass:"ion ion-ios-radio-button-on text-secondary"}),e._v(" Навык: "+e._s(t.name)+"\n                          "),n("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},e._l(e.nodes.filter((function(e){return e.type.includes("Умение")&&e.pid==t.id})),(function(t){return n("li",{key:t.id},[n("i",{staticClass:"ion ion-ios-radio-button-on text-success"}),e._v(" Умение: "+e._s(t.name)+"\n                                  "),n("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},e._l(e.nodes.filter((function(e){return e.type.includes("Знание")&&e.pid==t.id})),(function(t){return n("li",{key:t.id},[n("i",{staticClass:"ion ion-ios-radio-button-on text-warning"}),e._v(" Знание: "+e._s(t.name)+"\n                                      ")])})),0)])})),0)])})),0),e._v(" "),n("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},e._l(e.nodes.filter((function(e){return e.type.includes("Умение")&&e.pid==t.id})),(function(t){return n("li",{key:t.id},[n("i",{staticClass:"ion ion-ios-radio-button-on text-success"}),e._v(" Умение: "+e._s(t.name)+"\n                                  "),n("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},e._l(e.nodes.filter((function(e){return e.type.includes("Знание")&&e.pid==t.id})),(function(t){return n("li",{key:t.id},[n("i",{staticClass:"ion ion-ios-radio-button-on text-warning"}),e._v(" Знание: "+e._s(t.name)+"\n                                      ")])})),0)])})),0)])})),e._v(" "),n("hr"),e._v(" "),n("h5",[e._v("ЗУН, не прикрепленные к компетенциям")]),e._v(" "),n("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},e._l(e.nodes.filter((function(e){return e.type.includes("Навык")&&"c"==e.pid})),(function(t){return n("li",{key:t.id},[n("i",{staticClass:"ion ion-ios-radio-button-on text-secondary"}),e._v(" Навык: "+e._s(t.name)+"\n                          "),n("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},e._l(e.nodes.filter((function(e){return e.type.includes("Умение")&&e.pid==t.id})),(function(t){return n("li",{key:t.id},[n("i",{staticClass:"ion ion-ios-radio-button-on text-success"}),e._v(" Умение: "+e._s(t.name)+"\n                                  "),n("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},e._l(e.nodes.filter((function(e){return e.type.includes("Знание")&&e.pid==t.id})),(function(t){return n("li",{key:t.id},[n("i",{staticClass:"ion ion-ios-radio-button-on text-warning"}),e._v(" Знание: "+e._s(t.name)+"\n                                      ")])})),0)])})),0)])})),0),e._v(" "),n("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},e._l(e.nodes.filter((function(e){return e.type.includes("Умение")&&"s"==e.pid})),(function(t){return n("li",{key:t.id},[n("i",{staticClass:"ion ion-ios-radio-button-on text-success"}),e._v(" Умение: "+e._s(t.name)+"\n                                  "),n("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},e._l(e.nodes.filter((function(e){return e.type.includes("Знание")&&e.pid==t.id})),(function(t){return n("li",{key:t.id},[n("i",{staticClass:"ion ion-ios-radio-button-on text-warning"}),e._v(" Знание: "+e._s(t.name)+"\n                                      ")])})),0)])})),0),e._v(" "),n("hr"),e._v(" "),n("h5",[e._v("Сквозные знания:")]),e._v(" "),n("ul",{staticStyle:{"padding-left":"20px"},attrs:{type:"none"}},e._l(e.nodes.filter((function(e){return e.type.includes("Знание")&&"th"==e.pid})),(function(t){return n("li",{key:t.id},[n("i",{staticClass:"ion ion-ios-radio-button-on text-warning"}),e._v(" Знание: "+e._s(t.name)+"\n                      ")])})),0)],2)])],1)],1)],1),e._v(" "),n("new-skill2",{key:e.ns,attrs:{ish_version_id:e.stage.ish_version_id,parent_node:e.parent_node},on:{add_skill:e.add_skill}}),e._v(" "),n("new-ability2",{key:e.as,attrs:{ish_version_id:e.stage.ish_version_id,parent_node:e.parent_node},on:{add_ability:e.add_ability}}),e._v(" "),n("new-knowledge2",{key:e.ks,attrs:{dtps:e.parts,ish_version_id:e.stage.ish_version_id,parent_node:e.parent_node},on:{add_knowledge:e.add_knowledge}}),e._v(" "),n("new-competence2",{key:e.cs,attrs:{elems:e.unattached_elems},on:{add_competence:e.add_competence}}),e._v(" "),"parent"==e.edit_type?n("add-parent2",{key:e.edit_elem.id,attrs:{edit_elem:e.edit_elem,elems:e.nodes.filter((function(e){return"ability"==e.tags}))},on:{draw_parent:e.draw_parent}}):e._e(),e._v(" "),"remove_parent"==e.edit_type?n("remove-parent2",{key:"rp_"+e.edit_elem.id,attrs:{edit_elem:e.edit_elem,elems:e.links.filter((function(t){return t.from==e.edit_elem.id})),nodes:e.nodes},on:{erase_parent:e.erase_parent}}):e._e(),e._v(" "),e.isBusy||"0"==e.edit_elem.id||"skill"!=e.edit_type?e._e():n("edit-skill2",{key:"s"+e.edit_elem.id,attrs:{edit_elem:e.edit_elem.id,ish_version_id:e.stage.ish_version_id},on:{update_skill:e.update_skill}}),e._v(" "),e.isBusy||"0"==e.edit_elem.id||"ability"!=e.edit_type?e._e():n("edit-ability2",{key:"a"+e.edit_elem.id,attrs:{edit_elem:e.edit_elem.id,ish_version_id:e.stage.ish_version_id},on:{update_ability:e.update_ability}}),e._v(" "),e.isBusy||"0"==e.edit_elem.id||"knowledge"!=e.edit_type?e._e():n("edit-knowledge2",{key:"a"+e.edit_elem.id,attrs:{dtps:e.parts,edit_elem:e.edit_elem.id,ish_version_id:e.stage.ish_version_id},on:{update_knowledge:e.update_knowledge}}),e._v(" "),e.isBusy||"0"==e.edit_elem.id||"competence"!=e.edit_type?e._e():n("edit-competence2",{key:"c"+e.edit_elem.id,attrs:{edit_elem:e.edit_elem.id},on:{update_competence:e.update_competence}}),e._v(" "),e.isBusy||"0"==e.edit_elem.id?e._e():n("order-children",{key:"eo_"+e.edit_elem.id,attrs:{edit_elem:e.edit_elem,zun_version:e.stage.zun_version_id},on:{update_order:e.update_order}})],1)}),[],!1,null,null,null));t.default=q.exports},xY7A:function(e,t,n){"use strict";var i=n("WfUU"),s=n("ouQC"),l={name:"nsi-choose",props:{ish_version_id:Number,selected:Array},components:{NewNsi:i.a,EditNsi:s.a},data:function(){return{nn:"n",types:[],nsis:[],isBusy:!0,show_edit_window:!1,nsi_to_edit:0}},computed:{npas:function(){return this.nsis.filter((function(e){return 1==e.type_id}))},ychs:function(){return this.nsis.filter((function(e){return 2==e.type_id}))},irs:function(){return this.nsis.filter((function(e){return 3==e.type_id}))},ebss:function(){return this.nsis.filter((function(e){return 4==e.type_id}))}},methods:{add_nsi:function(e){var t=this,n=this;axios.post("/nsis/add_nsi",{nsi_data:e.nsi_data,ish_version_id:this.ish_version_id}).then((function(e){alert("Источник добавлен!"),n.nn++,n.nsis.push(e.data),t.$emit("add_nsi",{nsi_data:e.data})}))},update_nsi:function(e){var t=this;axios.post("/nsis/update_nsi",{nsi_data:e.nsi_data}).then((function(n){alert("Источник обновлен!"),t.nsis=t.nsis.filter((function(t){return t.id!=e.nsi_data.id})),t.nsis.push(n.data),t.$bvModal.hide("modal-editnsi")}))},remove_nsi:function(e){var t=this;this.$bvModal.msgBoxConfirm("Действительно хотите источник?").then((function(n){1==n&&axios.post("/nsis/remove_nsi",{nsi_id:e}).then((function(e){return t.nsis=t.nsis.filter((function(t){return t.id!=e.data}))}))}))},edit_nsi:function(e){var t=this;this.nsi_to_edit=e,this.show_edit_window=!0,this.$nextTick((function(){t.$bvModal.show("modal-editnsi")}))},change_nsi:function(e){this.$emit("change_nsi",{nsi_data:this.selected})}},mounted:function(){var e=this;axios.get("/nsis/nsi_types").then((function(t){return e.types=t.data})),axios.get("/nsis/"+this.ish_version_id).then((function(t){return e.nsis=t.data}))}},a=n("KHd+"),o=Object(a.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("h5",[e._v("Выбрано источников ("+e._s(e.selected.length)+")")])])]),e._v(" "),e._l(e.types,(function(t){return n("div",{key:"t"+t.id,staticClass:"col-md-12"},[n("h5",[e._v(e._s(t.name)+" ("+e._s(e.nsis.filter((function(e){return e.type_id==t.id})).length)+")")]),e._v(" "),n("b-form-checkbox-group",{attrs:{options:e.nsis.filter((function(e){return e.type_id==t.id})),name:"nsis","value-field":"id","text-field":"name",stacked:""},on:{input:e.change_nsi},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e._v(" "),n("br")],1)})),e._v(" "),n("new-nsi",{key:e.nn,attrs:{types:e.types},on:{add_nsi:e.add_nsi}}),e._v(" "),e.show_edit_window?n("edit-nsi",{key:e.nsi_to_edit,attrs:{nsi_id:e.nsi_to_edit,types:e.types},on:{update_nsi:e.update_nsi}}):e._e()],2)}),[],!1,null,null,null);t.a=o.exports}}]);