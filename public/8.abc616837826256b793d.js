(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"03B0":function(e,t,n){"use strict";n.r(t);var i=n("tBBa"),s=n("XuX8"),o=n.n(s),a=n("nr6O"),r=n("XhXj"),c={name:"new-question",metaInfo:{title:"Добавить новый вопрос"},components:{draggable:r.a,ModelSelect:i.ModelSelect},props:{knowledges:Array},data:function(){return{show_errors:!1,errors:[],new_question:{knowledge:{},text:"",text_state:"",type:"",type_state:"",single_choice_answers:[{id:this.generate_id(),text:"",is_right:!1},{id:this.generate_id(),text:"",is_right:!1},{id:this.generate_id(),text:"",is_right:!1},{id:this.generate_id(),text:"",is_right:!1}],free_choice_answers:[{id:this.generate_id(),text:"",is_right:!0}],multi_choice_answers:[{id:this.generate_id(),text:"",is_right:!1},{id:this.generate_id(),text:"",is_right:!1},{id:this.generate_id(),text:"",is_right:!1},{id:this.generate_id(),text:"",is_right:!1}],sequence_choice_answers:[{id:this.generate_id(),text:"",is_right:!0},{id:this.generate_id(),text:"",is_right:!0},{id:this.generate_id(),text:"",is_right:!0},{id:this.generate_id(),text:"",is_right:!0}],accordance_choice_answers:[{id:this.generate_id(),accord1:"",accord2:"",is_right:!0},{id:this.generate_id(),accord1:"",accord2:"",is_right:!0},{id:this.generate_id(),accord1:"",accord2:"",is_right:!0},{id:this.generate_id(),accord1:"",accord2:"",is_right:!0}],single_choice_fields:[{key:"is_right",label:"Правильный?"},{key:"text",label:"Текст ответа"}],multi_choice_fields:[{key:"is_right",label:"Правильный?"},{key:"text",label:"Текст ответа"}],free_choice_fields:[{key:"text",label:"Текст правильного ответа"}],accordance_choice_fields:[{key:"accord1",label:"Элемент"},{key:"accord2",label:"Соответствующий элемент"},{key:"is_right",label:"Удаление"}],single_choice_right:"",multi_choice_right:[]},type_options:[{value:{id:1,type_name:"Выбор одного правильного ответа"},text:"Выбор одного правильного ответа"},{value:{id:2,type_name:"Выбор нескольких правильных ответов"},text:"Выбор нескольких правильных ответов"},{value:{id:3,type_name:"Вопрос с открытым ответом"},text:"Вопрос с открытым ответом"},{value:{id:4,type_name:"Установление последовательности"},text:"Установление последовательности"},{value:{id:5,type_name:"Установление соответствия"},text:"Установление соответствия"}]}},methods:{handle_ok:function(e){if(e.preventDefault(),this.errors=[],this.show_errors=!1,this.new_question.knowledge.value||this.errors.push("Не выбрано знание, для которого формируется вопрос"),this.new_question.text.length<5&&this.errors.push("Не введен текст вопроса"),this.new_question.type.id)switch(this.new_question.type.id){case 1:""==this.new_question.single_choice_right&&this.errors.push("Не выбран правильный вариант ответа");for(var t=0;t<this.new_question.single_choice_answers.length;t++)""==this.new_question.single_choice_answers[t].text&&this.errors.push("Не введен один из вариантов ответа");break;case 2:this.new_question.multi_choice_right.length<2&&this.errors.push("Для данного типа вопроса необходимо выбрать более одного правильного варианта ответа");for(t=0;t<this.new_question.multi_choice_answers.length;t++)""==this.new_question.multi_choice_answers[t].text&&this.errors.push("Не введен вариантов ответа");break;case 3:for(t=0;t<this.new_question.free_choice_answers.length;t++)""==this.new_question.free_choice_answers[t].text&&this.errors.push("Не введен вариантов ответа");break;case 4:for(t=0;t<this.new_question.sequence_choice_answers.length;t++)""==this.new_question.sequence_choice_answers[t].text&&this.errors.push("Не введен вариантов ответа");break;case 5:for(t=0;t<this.new_question.accordance_choice_answers.length;t++)""!=this.new_question.accordance_choice_answers[t].accord1&&""!=this.new_question.accordance_choice_answers[t].accord2||this.errors.push("Не введен вариантов ответа")}else this.errors.push("Не выбран тип вопроса");this.errors.length>0?this.show_errors=!0:this.$emit("add_question",this.new_question)},generate_id:function(){return"f".concat((~~(1e8*Math.random())).toString(16))},add_single_choice_answer:function(){this.new_question.single_choice_answers.push({id:this.generate_id(),text:"",is_right:!1})},add_multi_choice_answer:function(){this.new_question.multi_choice_answers.push({id:this.generate_id(),text:"",is_right:!1})},add_free_choice_answer:function(){this.new_question.free_choice_answers.push({id:this.generate_id(),text:"",is_right:!0})},add_sequence_choice_answer:function(){this.new_question.sequence_choice_answers.push({id:this.generate_id(),text:"",is_right:!0})},add_accordance_choice_answer:function(){this.new_question.accordance_choice_answers.push({id:this.generate_id(),accord1:"",accord2:"",is_right:!0})},remove_single_choice_answer:function(e){this.new_question.single_choice_right==e.id&&(this.new_question.single_choice_right="");var t=this.new_question.single_choice_answers.filter((function(t){return t.id!=e.id}));this.new_question.single_choice_answers=t},remove_multi_choice_answer:function(e){var t=this.new_question.multi_choice_answers.filter((function(t){return t.id!=e.id}));this.new_question.multi_choice_answers=t,t=this.new_question.multi_choice_right.filter((function(t){return t!=e.id})),this.new_question.multi_choice_right=t},remove_free_choice_answer:function(e){var t=this.new_question.free_choice_answers.filter((function(t){return t.id!=e.id}));this.new_question.free_choice_answers=t},remove_sequence_choice_answer:function(e){var t=this.new_question.sequence_choice_answers.filter((function(t){return t.id!=e.id}));this.new_question.sequence_choice_answers=t},remove_accordance_choice_answer:function(e){var t=this.new_question.accordance_choice_answers.filter((function(t){return t.id!=e.id}));this.new_question.accordance_choice_answers=t}}},_=(n("27Qc"),n("KHd+")),l=Object(_.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("b-modal",{attrs:{"no-close-on-esc":"","no-close-on-backdrop":"",id:"modal-addquest","ok-title":"Добавить вопрос","cancel-title":"Закрыть",size:"xl",title:"Создание нового вопроса"},on:{ok:e.handle_ok}},[n("b-form-group",{attrs:{state:e.new_question.text_state,label:"Выберите знание","label-for":"knowledge-input","invalid-feedback":"Знание","label-cols-lg":"2","label-size":"lg"}},[n("model-select",{attrs:{id:"knowledge-input",options:e.knowledges,placeholder:"Выберите знание"},model:{value:e.new_question.knowledge,callback:function(t){e.$set(e.new_question,"knowledge",t)},expression:"new_question.knowledge"}})],1),e._v(" "),n("b-form-group",{attrs:{state:e.new_question.type_state,label:"Тип вопроса","label-for":"type-input","invalid-feedback":"Необходимо выбрать тип вопроса","label-cols-lg":"2","label-size":"lg"}},[n("b-form-select",{attrs:{id:"type-input",options:e.type_options},on:{change:function(t){e.show_errors=!1}},model:{value:e.new_question.type,callback:function(t){e.$set(e.new_question,"type",t)},expression:"new_question.type"}})],1),e._v(" "),n("b-form-group",{attrs:{state:e.new_question.text_state,label:"Текст вопроса","label-for":"text-input","invalid-feedback":"Необходимо ввести текст вопроса","label-cols-lg":"2","label-size":"lg"}},[n("b-form-textarea",{attrs:{id:"text-input",placeholder:"Введите текст вопроса"},model:{value:e.new_question.text,callback:function(t){e.$set(e.new_question,"text",t)},expression:"new_question.text"}})],1),e._v(" "),1==e.new_question.type.id?n("div",[n("p",[e._v("Введите варианты ответов и укажите правильный")]),e._v(" "),n("b-table",{attrs:{bordered:"",items:e.new_question.single_choice_answers,fields:e.new_question.single_choice_fields},scopedSlots:e._u([{key:"table-colgroup",fn:function(t){return e._l(t.fields,(function(e){return n("col",{key:e.key,style:{width:"is_right"===e.key?"10%":"90%"}})}))}},{key:"cell(text)",fn:function(t){return[n("b-row",[n("b-col",{attrs:{sm:"11"}},[n("b-form-input",{attrs:{placeholder:"Введите текст ответа"},model:{value:t.item.text,callback:function(n){e.$set(t.item,"text",n)},expression:"data.item.text"}}),e._v("  \n                ")],1),e._v(" "),n("b-col",{attrs:{sm:"1"}},[n("b-btn",{staticClass:"btn",attrs:{disabled:e.new_question.single_choice_answers.length<=4,variant:"outline-danger  icon-btn"},on:{click:function(n){return e.remove_single_choice_answer(t.item)}}},[n("i",{staticClass:"ion ion-md-close"})])],1)],1)]}},{key:"cell(is_right)",fn:function(t){return[n("b-form-radio",{attrs:{"button-variant":"outline-primary",value:t.item.id,name:"radio-size",size:"lg"},model:{value:e.new_question.single_choice_right,callback:function(t){e.$set(e.new_question,"single_choice_right",t)},expression:"new_question.single_choice_right"}})]}}],null,!1,2385344954)}),e._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:e.add_single_choice_answer}},[e._v("Добавить ответ")])],1):e._e(),e._v(" "),2==e.new_question.type.id?n("div",[n("p",[e._v("Введите варианты ответов и укажите правильные")]),e._v(" "),n("b-table",{attrs:{bordered:"",items:e.new_question.multi_choice_answers,fields:e.new_question.multi_choice_fields},scopedSlots:e._u([{key:"table-colgroup",fn:function(t){return e._l(t.fields,(function(e){return n("col",{key:e.key,style:{width:"is_right"===e.key?"10%":"90%"}})}))}},{key:"cell(text)",fn:function(t){return[n("b-row",[n("b-col",{attrs:{sm:"11"}},[n("b-form-input",{attrs:{placeholder:"Введите текст ответа"},model:{value:t.item.text,callback:function(n){e.$set(t.item,"text",n)},expression:"data.item.text"}}),e._v("  \n                ")],1),e._v(" "),n("b-col",{attrs:{sm:"1"}},[n("b-btn",{staticClass:"btn",attrs:{disabled:e.new_question.multi_choice_answers.length<=4,variant:"outline-danger  icon-btn"},on:{click:function(n){return e.remove_multi_choice_answer(t.item)}}},[n("i",{staticClass:"ion ion-md-close"})])],1)],1)]}},{key:"cell(is_right)",fn:function(t){return[n("b-form-checkbox",{attrs:{"button-variant":"outline-primary",value:t.item.id,name:"multi_check",size:"lg"},model:{value:e.new_question.multi_choice_right,callback:function(t){e.$set(e.new_question,"multi_choice_right",t)},expression:"new_question.multi_choice_right"}})]}}],null,!1,449133122)}),e._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:e.add_multi_choice_answer}},[e._v("Добавить ответ")])],1):e._e(),e._v(" "),3==e.new_question.type.id?n("div",[n("p",[e._v("Введите допустимые (правильные) варианты ответов")]),e._v(" "),n("b-table",{attrs:{bordered:"",items:e.new_question.free_choice_answers,fields:e.new_question.free_choice_fields},scopedSlots:e._u([{key:"cell(text)",fn:function(t){return[n("b-row",[n("b-col",{attrs:{sm:"11"}},[n("b-form-input",{attrs:{placeholder:"Введите текст ответа"},model:{value:t.item.text,callback:function(n){e.$set(t.item,"text",n)},expression:"data.item.text"}}),e._v("  \n                ")],1),e._v(" "),n("b-col",{attrs:{sm:"1"}},[n("b-btn",{staticClass:"btn",attrs:{disabled:1==e.new_question.free_choice_answers.length,variant:"outline-danger  icon-btn"},on:{click:function(n){return e.remove_free_choice_answer(t.item)}}},[n("i",{staticClass:"ion ion-md-close"})])],1)],1)]}}],null,!1,526813768)}),e._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:e.add_free_choice_answer}},[e._v("Добавить ответ")])],1):e._e(),e._v(" "),4==e.new_question.type.id?n("div",[n("p",[e._v("Запишите ответы в правильной последовательности. Вы можете поменять последовательность ответов путем перетаскивания элемента (с помощью иконки "),n("i",{staticClass:"ion ion-ios-move m-r-1"}),e._v("). Для обучающихся в момент прохождения теста ответы будут перемешаны.")]),e._v(" "),n("draggable",e._b({staticClass:"sortable-example",attrs:{tag:"div"},model:{value:e.new_question.sequence_choice_answers,callback:function(t){e.$set(e.new_question,"sequence_choice_answers",t)},expression:"new_question.sequence_choice_answers"}},"draggable",{animation:150,handle:".ion"},!1),e._l(e.new_question.sequence_choice_answers,(function(t){return n("div",{key:t.id,staticStyle:{"margin-bottom":"10px"}},[n("b-row",[n("b-col",{attrs:{sm:"1"}},[n("i",{staticClass:"ion ion-ios-move m-r-1",staticStyle:{"font-size":"35px"}}),e._v("  \n                ")]),e._v(" "),n("b-col",{attrs:{sm:"10"}},[n("b-form-input",{attrs:{placeholder:"Введите текст ответа"},model:{value:t.text,callback:function(n){e.$set(t,"text",n)},expression:"item.text"}}),e._v("  \n                ")],1),e._v(" "),n("b-col",{attrs:{sm:"1"}},[n("b-btn",{staticClass:"btn",attrs:{disabled:e.new_question.sequence_choice_answers.length<=2,variant:"outline-danger  icon-btn"},on:{click:function(n){return e.remove_sequence_choice_answer(t)}}},[e._v("X")])],1)],1)],1)})),0),e._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:e.add_sequence_choice_answer}},[e._v("Добавить ответ")])],1):e._e(),e._v(" "),5==e.new_question.type.id?n("div",[n("b-table",{attrs:{bordered:"",items:e.new_question.accordance_choice_answers,fields:e.new_question.accordance_choice_fields},scopedSlots:e._u([{key:"table-colgroup",fn:function(t){return e._l(t.fields,(function(e){return n("col",{key:e.key,style:{width:"is_right"===e.key?"10%":"45%"}})}))}},{key:"cell(accord1)",fn:function(t){return[n("b-form-input",{attrs:{placeholder:"Введите текст ответа"},model:{value:t.item.accord1,callback:function(n){e.$set(t.item,"accord1",n)},expression:"data.item.accord1"}}),e._v("  \n            ")]}},{key:"cell(accord2)",fn:function(t){return[n("b-form-input",{attrs:{placeholder:"Введите текст ответа"},model:{value:t.item.accord2,callback:function(n){e.$set(t.item,"accord2",n)},expression:"data.item.accord2"}}),e._v("  \n            ")]}},{key:"cell(is_right)",fn:function(t){return[n("b-btn",{staticClass:"btn",attrs:{disabled:e.new_question.accordance_choice_answers.length<2,variant:"outline-danger  icon-btn"},on:{click:function(n){return e.remove_accordance_choice_answer(t.item)}}},[n("i",{staticClass:"ion ion-md-close"})])]}}],null,!1,69650684)}),e._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:e.add_accordance_choice_answer}},[e._v("Добавить ответ")])],1):e._e(),e._v(" "),e.show_errors?n("div",[n("b-alert",{attrs:{show:"",variant:"danger"}},[n("strong",[e._v("Обнаружены ошибки!")]),e._v(" "),n("ul",e._l(e.errors,(function(t,i){return n("li",{key:i},[e._v(e._s(t))])})),0)])],1):e._e()],1)],1)])}),[],!1,null,null,null).exports,u={name:"edit-question",metaInfo:{title:"Отредактировать вопрос"},components:{draggable:r.a,ModelSelect:i.ModelSelect},props:{knowledges:Array,question_to_edit:Number},data:function(){return{show_errors:!1,errors:[],new_question:{knowledge:{},text:"",text_state:"",type:"",type_state:"",single_choice_answers:[{id:this.generate_id(),text:"Ответ 1",is_right:!1},{id:this.generate_id(),text:"Ответ 2",is_right:!1},{id:this.generate_id(),text:"Ответ 3",is_right:!1},{id:this.generate_id(),text:"Ответ 4",is_right:!1}],free_choice_answers:[{id:this.generate_id(),text:"Ответ 1",is_right:!0}],multi_choice_answers:[{id:this.generate_id(),text:"Ответ 1",is_right:!1},{id:this.generate_id(),text:"Ответ 2",is_right:!1},{id:this.generate_id(),text:"Ответ 3",is_right:!1},{id:this.generate_id(),text:"Ответ 4",is_right:!1}],sequence_choice_answers:[{id:this.generate_id(),text:"Ответ 1",is_right:!0},{id:this.generate_id(),text:"Ответ 2",is_right:!0},{id:this.generate_id(),text:"Ответ 3",is_right:!0},{id:this.generate_id(),text:"Ответ 4",is_right:!0}],accordance_choice_answers:[{id:this.generate_id(),accord1:"Элемент 1",accord2:"Соответствующий элемент 1",is_right:!0},{id:this.generate_id(),accord1:"Элемент 2",accord2:"Соответствующий элемент 2",is_right:!0},{id:this.generate_id(),accord1:"Элемент 3",accord2:"Соответствующий элемент 3",is_right:!0},{id:this.generate_id(),accord1:"Элемент 4",accord2:"Соответствующий элемент 4",is_right:!0}],single_choice_fields:[{key:"is_right",label:"Правильный?"},{key:"text",label:"Текст ответа"}],multi_choice_fields:[{key:"is_right",label:"Правильный?"},{key:"text",label:"Текст ответа"}],free_choice_fields:[{key:"text",label:"Текст правильного ответа"}],accordance_choice_fields:[{key:"accord1",label:"Элемент"},{key:"accord2",label:"Соответствующий элемент"},{key:"is_right",label:"Удаление"}],single_choice_right:"",multi_choice_right:[]},type_options:[{value:{id:1,type_name:"Выбор одного правильного ответа"},text:"Выбор одного правильного ответа"},{value:{id:2,type_name:"Выбор нескольких правильных ответов"},text:"Выбор нескольких правильных ответов"},{value:{id:3,type_name:"Вопрос с открытым ответом"},text:"Вопрос с открытым ответом"},{value:{id:4,type_name:"Установление последовательности"},text:"Установление последовательности"},{value:{id:5,type_name:"Установление соответствия"},text:"Установление соответствия"}]}},methods:{handle_ok:function(e){if(e.preventDefault(),this.errors=[],this.show_errors=!1,this.new_question.text.length<5)this.errors.push("Не введен текст вопроса");else switch(this.new_question.type.id){case 1:""==this.new_question.single_choice_right&&this.errors.push("Не выбран правильный вариант ответа");for(var t=0;t<this.new_question.single_choice_answers.length;t++)""==this.new_question.single_choice_answers[t].text&&this.errors.push("Не введен один из вариантов ответа");break;case 2:this.new_question.multi_choice_right.length<2&&this.errors.push("Для данного типа вопроса необходимо выбрать более одного правильного варианта ответа");for(t=0;t<this.new_question.multi_choice_answers.length;t++)""==this.new_question.multi_choice_answers[t].text&&this.errors.push("Не введен вариантов ответа");break;case 3:for(t=0;t<this.new_question.free_choice_answers.length;t++)""==this.new_question.free_choice_answers[t].text&&this.errors.push("Не введен вариантов ответа");break;case 4:for(t=0;t<this.new_question.sequence_choice_answers.length;t++)""==this.new_question.sequence_choice_answers[t].text&&this.errors.push("Не введен вариантов ответа");break;case 5:for(t=0;t<this.new_question.accordance_choice_answers.length;t++)""!=this.new_question.accordance_choice_answers[t].accord1&&""!=this.new_question.accordance_choice_answers[t].accord2||this.errors.push("Не введен вариантов ответа")}this.errors.length>0?this.show_errors=!0:(console.log("OK"),this.$emit("update_question",this.new_question,this.question_to_edit))},generate_id:function(){return"f".concat((~~(1e8*Math.random())).toString(16))},add_single_choice_answer:function(){this.new_question.single_choice_answers.push({id:this.generate_id(),text:"Новый ответ",is_right:!1})},add_multi_choice_answer:function(){this.new_question.multi_choice_answers.push({id:this.generate_id(),text:"Новый ответ",is_right:!1})},add_free_choice_answer:function(){this.new_question.free_choice_answers.push({id:this.generate_id(),text:"Новый ответ",is_right:!0})},add_sequence_choice_answer:function(){this.new_question.sequence_choice_answers.push({id:this.generate_id(),text:"Новый ответ",is_right:!0})},add_accordance_choice_answer:function(){this.new_question.accordance_choice_answers.push({id:this.generate_id(),accord1:"Новый элемент",accord2:"Новый соответствующий элемент",is_right:!0})},remove_single_choice_answer:function(e){this.new_question.single_choice_right==e.id&&(this.new_question.single_choice_right="");var t=this.new_question.single_choice_answers.filter((function(t){return t.id!=e.id}));this.new_question.single_choice_answers=t},remove_multi_choice_answer:function(e){var t=this.new_question.multi_choice_answers.filter((function(t){return t.id!=e.id}));this.new_question.multi_choice_answers=t,t=this.new_question.multi_choice_right.filter((function(t){return t!=e.id})),this.new_question.multi_choice_right=t},remove_free_choice_answer:function(e){var t=this.new_question.free_choice_answers.filter((function(t){return t.id!=e.id}));this.new_question.free_choice_answers=t},remove_sequence_choice_answer:function(e){var t=this.new_question.sequence_choice_answers.filter((function(t){return t.id!=e.id}));this.new_question.sequence_choice_answers=t},remove_accordance_choice_answer:function(e){var t=this.new_question.accordance_choice_answers.filter((function(t){return t.id!=e.id}));this.new_question.accordance_choice_answers=t}},mounted:function(){self=this,axios.get("/dpps/get_question_data/"+this.question_to_edit).then((function(e){switch(self.new_question.knowledge=e.data.knowledge,self.new_question.type=e.data.type,self.new_question.text=e.data.text,console.log(e.data.ans_arr),e.data.type.id){case 1:self.new_question.single_choice_answers=e.data.ans_arr,self.new_question.single_choice_right=e.data.single_choice_right;break;case 2:self.new_question.multi_choice_answers=e.data.ans_arr,self.new_question.multi_choice_right=e.data.multi_choice_right;break;case 3:self.new_question.free_choice_answers=e.data.ans_arr;break;case 4:self.new_question.sequence_choice_answers=e.data.ans_arr;break;case 5:self.new_question.accordance_choice_answers=e.data.ans_arr}}))}},d=Object(_.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("b-modal",{attrs:{"no-close-on-esc":"","no-close-on-backdrop":"",id:"modal-editquestion","ok-title":"Сохранить","cancel-title":"Закрыть",size:"xl",title:"Редактирование вопроса"},on:{ok:e.handle_ok}},[n("b-form-group",{attrs:{state:e.new_question.text_state,label:"Выберите знание","label-for":"knowledge-input","invalid-feedback":"Знание","label-cols-lg":"2","label-size":"lg"}},[n("p",[e._v(e._s(e.new_question.knowledge.name))])]),e._v(" "),n("b-form-group",{attrs:{state:e.new_question.type_state,label:"Тип вопроса","label-for":"type-input","invalid-feedback":"Необходимо выбрать тип вопроса","label-cols-lg":"2","label-size":"lg"}},[n("p",[e._v(e._s(e.new_question.type.name))])]),e._v(" "),n("b-form-group",{attrs:{state:e.new_question.text_state,label:"Текст вопроса","label-for":"text-input","invalid-feedback":"Необходимо ввести текст вопроса","label-cols-lg":"2","label-size":"lg"}},[n("b-form-textarea",{attrs:{id:"text-input",placeholder:"Введите текст вопроса"},model:{value:e.new_question.text,callback:function(t){e.$set(e.new_question,"text",t)},expression:"new_question.text"}})],1),e._v(" "),1==e.new_question.type.id?n("div",[n("p",[e._v("Введите варианты ответов и укажите правильный")]),e._v(" "),n("b-table",{attrs:{bordered:"",items:e.new_question.single_choice_answers,fields:e.new_question.single_choice_fields},scopedSlots:e._u([{key:"table-colgroup",fn:function(t){return e._l(t.fields,(function(e){return n("col",{key:e.key,style:{width:"is_right"===e.key?"10%":"90%"}})}))}},{key:"cell(text)",fn:function(t){return[n("b-row",[n("b-col",{attrs:{sm:"11"}},[n("b-form-input",{attrs:{placeholder:"Введите текст ответа"},model:{value:t.item.text,callback:function(n){e.$set(t.item,"text",n)},expression:"data.item.text"}}),e._v("  \n                ")],1),e._v(" "),n("b-col",{attrs:{sm:"1"}},[n("b-btn",{staticClass:"btn",attrs:{disabled:e.new_question.single_choice_answers.length<=4,variant:"outline-danger  icon-btn"},on:{click:function(n){return e.remove_single_choice_answer(t.item)}}},[n("i",{staticClass:"ion ion-md-close"})])],1)],1)]}},{key:"cell(is_right)",fn:function(t){return[n("b-form-radio",{attrs:{"button-variant":"outline-primary",value:t.item.id,name:"radio-size",size:"lg"},model:{value:e.new_question.single_choice_right,callback:function(t){e.$set(e.new_question,"single_choice_right",t)},expression:"new_question.single_choice_right"}})]}}],null,!1,2385344954)}),e._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:e.add_single_choice_answer}},[e._v("Добавить ответ")])],1):e._e(),e._v(" "),2==e.new_question.type.id?n("div",[n("p",[e._v("Введите варианты ответов и укажите правильные")]),e._v(" "),n("b-table",{attrs:{bordered:"",items:e.new_question.multi_choice_answers,fields:e.new_question.multi_choice_fields},scopedSlots:e._u([{key:"table-colgroup",fn:function(t){return e._l(t.fields,(function(e){return n("col",{key:e.key,style:{width:"is_right"===e.key?"10%":"90%"}})}))}},{key:"cell(text)",fn:function(t){return[n("b-row",[n("b-col",{attrs:{sm:"11"}},[n("b-form-input",{attrs:{placeholder:"Введите текст ответа"},model:{value:t.item.text,callback:function(n){e.$set(t.item,"text",n)},expression:"data.item.text"}}),e._v("  \n                ")],1),e._v(" "),n("b-col",{attrs:{sm:"1"}},[n("b-btn",{staticClass:"btn",attrs:{disabled:e.new_question.multi_choice_answers.length<=4,variant:"outline-danger  icon-btn"},on:{click:function(n){return e.remove_multi_choice_answer(t.item)}}},[n("i",{staticClass:"ion ion-md-close"})])],1)],1)]}},{key:"cell(is_right)",fn:function(t){return[n("b-form-checkbox",{attrs:{"button-variant":"outline-primary",value:t.item.id,name:"multi_check",size:"lg"},model:{value:e.new_question.multi_choice_right,callback:function(t){e.$set(e.new_question,"multi_choice_right",t)},expression:"new_question.multi_choice_right"}})]}}],null,!1,449133122)}),e._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:e.add_multi_choice_answer}},[e._v("Добавить ответ")])],1):e._e(),e._v(" "),3==e.new_question.type.id?n("div",[n("p",[e._v("Введите допустимые (правильные) варианты ответов")]),e._v(" "),n("b-table",{attrs:{bordered:"",items:e.new_question.free_choice_answers,fields:e.new_question.free_choice_fields},scopedSlots:e._u([{key:"cell(text)",fn:function(t){return[n("b-row",[n("b-col",{attrs:{sm:"11"}},[n("b-form-input",{attrs:{placeholder:"Введите текст ответа"},model:{value:t.item.text,callback:function(n){e.$set(t.item,"text",n)},expression:"data.item.text"}}),e._v("  \n                ")],1),e._v(" "),n("b-col",{attrs:{sm:"1"}},[n("b-btn",{staticClass:"btn",attrs:{disabled:1==e.new_question.free_choice_answers.length,variant:"outline-danger  icon-btn"},on:{click:function(n){return e.remove_free_choice_answer(t.item)}}},[n("i",{staticClass:"ion ion-md-close"})])],1)],1)]}}],null,!1,526813768)}),e._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:e.add_free_choice_answer}},[e._v("Добавить ответ")])],1):e._e(),e._v(" "),4==e.new_question.type.id?n("div",[n("p",[e._v("Запишите ответы в правильной последовательности. Вы можете поменять последовательность ответов путем перетаскивания элемента (с помощью иконки "),n("i",{staticClass:"ion ion-ios-move m-r-1"}),e._v("). Для обучающихся в момент прохождения теста ответы будут перемешаны.")]),e._v(" "),n("draggable",e._b({staticClass:"sortable-example",attrs:{tag:"div"},model:{value:e.new_question.sequence_choice_answers,callback:function(t){e.$set(e.new_question,"sequence_choice_answers",t)},expression:"new_question.sequence_choice_answers"}},"draggable",{animation:150,handle:".ion"},!1),e._l(e.new_question.sequence_choice_answers,(function(t){return n("div",{key:t.id,staticStyle:{"margin-bottom":"10px"}},[n("b-row",[n("b-col",{attrs:{sm:"1"}},[n("i",{staticClass:"ion ion-ios-move m-r-1",staticStyle:{"font-size":"35px"}}),e._v("  \n                ")]),e._v(" "),n("b-col",{attrs:{sm:"10"}},[n("b-form-input",{attrs:{placeholder:"Введите текст ответа"},model:{value:t.text,callback:function(n){e.$set(t,"text",n)},expression:"item.text"}}),e._v("  \n                ")],1),e._v(" "),n("b-col",{attrs:{sm:"1"}},[n("b-btn",{staticClass:"btn",attrs:{disabled:e.new_question.sequence_choice_answers.length<=2,variant:"outline-danger  icon-btn"},on:{click:function(n){return e.remove_sequence_choice_answer(t)}}},[e._v("X")])],1)],1)],1)})),0),e._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:e.add_sequence_choice_answer}},[e._v("Добавить ответ")])],1):e._e(),e._v(" "),5==e.new_question.type.id?n("div",[n("b-table",{attrs:{bordered:"",items:e.new_question.accordance_choice_answers,fields:e.new_question.accordance_choice_fields},scopedSlots:e._u([{key:"table-colgroup",fn:function(t){return e._l(t.fields,(function(e){return n("col",{key:e.key,style:{width:"is_right"===e.key?"10%":"45%"}})}))}},{key:"cell(accord1)",fn:function(t){return[n("b-form-input",{attrs:{placeholder:"Введите текст ответа"},model:{value:t.item.accord1,callback:function(n){e.$set(t.item,"accord1",n)},expression:"data.item.accord1"}}),e._v("  \n            ")]}},{key:"cell(accord2)",fn:function(t){return[n("b-form-input",{attrs:{placeholder:"Введите текст ответа"},model:{value:t.item.accord2,callback:function(n){e.$set(t.item,"accord2",n)},expression:"data.item.accord2"}}),e._v("  \n            ")]}},{key:"cell(is_right)",fn:function(t){return[n("b-btn",{staticClass:"btn",attrs:{disabled:e.new_question.accordance_choice_answers.length<2,variant:"outline-danger  icon-btn"},on:{click:function(n){return e.remove_accordance_choice_answer(t.item)}}},[n("i",{staticClass:"ion ion-md-close"})])]}}],null,!1,69650684)}),e._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:e.add_accordance_choice_answer}},[e._v("Добавить ответ")])],1):e._e(),e._v(" "),e.show_errors?n("div",[n("b-alert",{attrs:{show:"",variant:"danger"}},[n("strong",[e._v("Обнаружены ошибки!")]),e._v(" "),n("ul",e._l(e.errors,(function(t,i){return n("li",{key:i},[e._v(e._s(t))])})),0)])],1):e._e()],1)],1)])}),[],!1,null,null,null).exports;o.a.use(a.ClientTable);var h={name:"dpp_stage_work_om",metaInfo:{title:"Разработка ДПП - Оценочные материалы"},components:{ModelSelect:i.ModelSelect,ClientTable:a.ClientTable,NewQuestion:l,EditQuestion:d},computed:{header:function(){return"Разработка ДПП / "+this.stage.dpp_name+" / "+this.stage.type_name}},data:function(){return{show_edit_window:!1,show_task_edit_window:!1,question_to_edit:0,task_to_edit:0,nq_key:0,eq_key:0,stage:{},tasks:[],knowledge:{questions:[]},knowledges:[{text:"Знание 1",value:1,questions:[{text:"Вопрос 1",type_name:"Выбор вариантов ответа"}]},{text:"Знание 2",value:2,questions:[]}],zuns:[],kn_columns:["text","type_name","edit"],task_columns:["name","edit"],options:{pagination:{chunk:5},sortIcon:{is:"fa-sort",base:"fas",up:"fa-sort-up",down:"fa-sort-down"},headings:{text:"Текст вопроса",type_name:"Тип вопроса",edit:"Действия"},texts:{count:"Showing {from} to {to} of {count} records|{count} records|Одна запись",first:"First",last:"Last",filter:"Поиск:",filterPlaceholder:"текст поиска",limit:"Записей:",page:"Страница:",noResults:"Не найдено ни одной записи",filterBy:"Filter by {column}",loading:"Загрузка...",defaultOption:"Select {column}",columns:"Columns"}},task_options:{pagination:{chunk:5},sortIcon:{is:"fa-sort",base:"fas",up:"fa-sort-up",down:"fa-sort-down"},headings:{text:"Текст вопроса",type_name:"Тип вопроса",name:"Задание",edit:"Действия"},texts:{count:"Showing {from} to {to} of {count} records|{count} records|Одна запись",first:"First",last:"Last",filter:"Поиск:",filterPlaceholder:"текст поиска",limit:"Записей:",page:"Страница:",noResults:"Не найдено ни одной записи",filterBy:"Filter by {column}",loading:"Загрузка...",defaultOption:"Select {column}",columns:"Columns"}}}},methods:{add_question:function(e){self=this,console.log(e),axios.post("/om_version/"+this.stage.om_version_id+"/add_question",{question_data:e}).then((function(t){self.knowledges.find((function(t){return t.id===e.knowledge.id})).questions.push({id:t.data,text:e.text,type_name:e.type.type_name}),self.nq_key+=1}))},color_kn:function(e){return e.length<4?"danger":"success"},remove_question:function(e){console.log(e),self=this,this.$bvModal.msgBoxConfirm("Действительно хотите удалить вопрос «"+e.text+"»?").then((function(t){!0===t&&axios.post("/questions/delete",{id:e.id}).then((function(t){console.log(self.knowledges);for(var n=0;n<self.knowledges.length;n++)for(var i=self.knowledges[n].questions,s=0;s<i.length;s++)if(i[s].id==e.id){var o=self.knowledges[n].questions.indexOf(i[s]);self.knowledges[n].questions.splice(o,1)}}))})).catch((function(e){}))},edit_question:function(e){var t=this;this.question_to_edit=e,this.show_edit_window=!0,this.$nextTick((function(){t.$bvModal.show("modal-editquestion")}))},update_question:function(e,t){self=this,console.log(e),axios.post("/om_version/"+this.stage.om_version_id+"/update_question",{question_data:e,question_id:t}).then((function(e){self.knowledges.find((function(t){return t.id===e.data.knowledge_id})).questions.find((function(t){return t.id==e.data.id})).text=e.data.text,console.log(e),self.$bvModal.hide("modal-editquestion"),self.show_edit_window=!1}))},add_task:function(e){var t=this;self=this,axios.post("/dpps/add_task",{om_version_id:this.stage.om_version_id,type:e}).then((function(e){return t.$router.push("/my_dpps/"+t.$route.params.dpp+"/stages/"+t.stage.id+"/work_om/tasks/"+e.data)}))},edit_task:function(e){this.$router.push("/my_dpps/"+this.$route.params.dpp+"/stages/"+this.stage.id+"/work_om/tasks/"+e)},remove_task:function(e){self=this,this.$bvModal.msgBoxConfirm("Действительно хотите задание «"+e.name+" ("+e.type_name+")»?").then((function(t){!0===t&&axios.post("/dpps/tasks/remove_task",{id:e.id}).then((function(t){self.tasks=self.tasks.filter((function(t){return t.id!=e.id}))})).finally((function(e){}))}))},update_task:function(e){}},mounted:function(){var e=this,t=this;axios.get("/dpps/"+this.$route.params.dpp+"/get_stage_data/"+this.$route.params.stage).then((function(t){return e.stage=t.data})).finally((function(e){axios.get("/dpps/"+t.stage.dpp_id+"/get_knowledges_to_ov/"+t.stage.om_version_id).then((function(e){return t.knowledges=e.data})),axios.get("/dpps/get_tasks/"+t.stage.om_version_id).then((function(e){return t.tasks=e.data})),axios.get("/dpps/"+t.$route.params.dpp+"/get_zuns_to_om/"+t.stage.zun_version_id).then((function(e){return t.zuns=e.data}))}))}},m=(n("mswM"),Object(_.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("Назад")]),e._v(" "),n("b-card",{attrs:{title:e.header}},[n("b-tabs",{attrs:{"content-class":"mt-3",pills:"",fill:""}},[n("b-tab",{attrs:{title:"Знания",active:""}},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-addquest",modifiers:{"modal-addquest":!0}}],attrs:{variant:"primary"}},[e._v("Добавить вопрос")]),e._v(" "),n("b-dropdown",{staticClass:"m-md-2",attrs:{id:"dropdown-2",text:"Экспорт"}},[n("b-dropdown-item",{attrs:{href:"/dpps/"+this.$route.params.dpp+"/export_om_questions/"+this.stage.om_version_id}},[e._v("Экспорт в Word вопросов")])],1),e._v(" "),n("hr"),e._v(" "),n("new-question",{key:e.nq_key,attrs:{knowledges:e.knowledges},on:{add_question:e.add_question}}),e._v(" "),e.show_edit_window?n("edit-question",{key:e.question_to_edit,attrs:{question_to_edit:e.question_to_edit},on:{update_question:e.update_question}}):e._e(),e._v(" "),n("h5",[e._v("Фильтр вопросов по знаниям")]),e._v(" "),n("model-select",{attrs:{id:"user-input",options:e.knowledges,placeholder:"Выберите знание"},model:{value:e.knowledge,callback:function(t){e.knowledge=t},expression:"knowledge"}}),e._v(" "),n("hr",{staticClass:"container-m-nx border-light mt-2 mb-2"}),e._v(" "),n("v-client-table",{attrs:{data:e.knowledge.questions,columns:e.kn_columns,options:e.options},scopedSlots:e._u([{key:"edit",fn:function(t){return[n("div",[n("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-info icon-btn"},on:{click:function(n){return n.preventDefault(),e.edit_question(t.row.id)}}},[n("i",{staticClass:"ion ion-md-create"})]),e._v(" "),n("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-danger icon-btn"},on:{click:function(n){return n.preventDefault(),e.remove_question(t.row)}}},[n("i",{staticClass:"ion ion-md-close"})])],1)]}}])}),e._v(" "),n("hr"),e._v(" "),n("h5",[e._v("Статистика вопросов")]),e._v(" "),n("table",{staticClass:"table table-bordered"},[n("thead",[n("tr",[n("th",[e._v("Знание")]),e._v(" "),n("th",[e._v("Вопросов")])])]),e._v(" "),n("tbody",e._l(e.knowledges,(function(t){return n("tr",{key:t.id},[n("td",[e._v(e._s(t.name))]),e._v(" "),n("td",[e._v(e._s(t.questions.length))])])})),0)])],1),e._v(" "),n("b-tab",{attrs:{title:"Умения/Навыки"}},[n("b-dropdown",{staticClass:"m-md-2",attrs:{id:"dropdown-3",text:"Добавить",variant:"primary"}},[n("b-dropdown-item",{on:{click:function(t){return e.add_task(1)}}},[e._v("Задание на применение умений и навыков в реальных или модельных условиях (Практическое задание)")]),e._v(" "),n("b-dropdown-item",{on:{click:function(t){return e.add_task(2)}}},[e._v("Задание на оформление и защиту портфолио")])],1),e._v(" "),n("b-dropdown",{staticClass:"m-md-2",attrs:{id:"dropdown-4",text:"Экспорт"}},[n("b-dropdown-item",{attrs:{href:"/dpps/"+this.$route.params.dpp+"/export_om_questions/"+this.stage.om_version_id}},[e._v("Экспорт в Word заданий")])],1),e._v(" "),n("hr"),e._v(" "),n("v-client-table",{attrs:{data:e.tasks,columns:e.task_columns,options:e.task_options},scopedSlots:e._u([{key:"name",fn:function(t){return[e._v("\r\n                        "+e._s(t.row.name)+" ("+e._s(t.row.type_name)+")\r\n                    ")]}},{key:"edit",fn:function(t){return[n("div",[n("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-info icon-btn"},on:{click:function(n){return n.preventDefault(),e.edit_task(t.row.id)}}},[n("i",{staticClass:"ion ion-md-create"})]),e._v(" "),n("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-danger icon-btn"},on:{click:function(n){return n.preventDefault(),e.remove_task(t.row)}}},[n("i",{staticClass:"ion ion-md-close"})])],1)]}}])}),e._v(" "),e.show_task_edit_window?n("edit-task",{key:"t"+e.task_to_edit,attrs:{zuns:e.zuns,task_to_edit:e.task_to_edit},on:{update_task:e.update_task}}):e._e()],1)],1)],1)],1)}),[],!1,null,null,null));t.default=m.exports},"27Qc":function(e,t,n){"use strict";var i=n("LPlo");n.n(i).a},"7dIG":function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,'.VueTables__child-row-toggler {\n  display: inline-block;\n  margin: auto;\n  width: 100%;\n  height: 16px;\n  text-align: center;\n  line-height: 16px;\n  cursor: pointer;\n}\n.VueTables__child-row-toggler--closed::before {\n  content: "+";\n}\n.VueTables__child-row-toggler--open::before {\n  content: "-";\n}\n.VueTables__sortable {\n  position: relative;\n}\n.VueTables__sort-icon {\n  position: absolute;\n  top: 50%;\n  right: 6px;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n[dir=rtl] .VueTables__sort-icon {\n  right: auto;\n  left: 6px;\n}\n.VuePagination nav {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  -ms-flex-pack: justify;\n      justify-content: space-between;\n  width: 100%;\n}\n.VuePagination .pagination,\n.VuePagination__count {\n  -ms-flex-preferred-size: auto !important;\n      flex-basis: auto !important;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  margin: 0 0 1rem 0;\n  width: auto !important;\n}\n.VueTables__search label,\n.VueTables__limit label {\n  display: inline-block !important;\n  margin-right: .5em;\n}\n[dir=rtl] .VueTables__search label, [dir=rtl]\n.VueTables__limit label {\n  margin-right: 0;\n  margin-left: .5em;\n}\n[dir="rtl"] .pull-left {\n  float: right;\n}\n[dir="rtl"] .pull-right {\n  float: left;\n}\n.default-style .VueTables__sort-icon {\n  color: #a3a4a6;\n  font-size: 0.75rem;\n}\n.default-style .VuePagination__pagination-item > a {\n  padding: 0.375rem 0.25rem;\n  min-width: calc(1.5rem + 2px);\n  text-align: center;\n  font-size: 0.75rem;\n  border-radius: 0.25rem;\n}\n.default-style .VuePagination__count {\n  color: #a3a4a6;\n  font-size: 0.75rem;\n}\n.material-style .VueTables__sort-icon {\n  color: #a3a4a6;\n  font-size: 0.75rem;\n}\n.material-style .VuePagination__pagination-item > a {\n  padding: 0.375rem 0.25rem;\n  min-width: calc(1.5rem + 0px);\n  text-align: center;\n  font-size: 0.75rem;\n  border-radius: 0.125rem;\n}\n.material-style .VuePagination__count {\n  color: #a3a4a6;\n  font-size: 0.75rem;\n}\n',""])},LPlo:function(e,t,n){var i=n("pUBL");"string"==typeof i&&(i=[[e.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,s);i.locals&&(e.exports=i.locals)},kYbW:function(e,t,n){var i=n("7dIG");"string"==typeof i&&(i=[[e.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,s);i.locals&&(e.exports=i.locals)},mswM:function(e,t,n){"use strict";var i=n("kYbW");n.n(i).a},pUBL:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,'.gu-mirror {\n  position: fixed !important;\n  margin: 0 !important;\n  z-index: 9999 !important;\n  opacity: 0.8;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";\n  filter: alpha(opacity=80);\n}\n.gu-hide {\n  display: none !important;\n}\n.gu-unselectable {\n  -webkit-user-select: none !important;\n  -moz-user-select: none !important;\n  -ms-user-select: none !important;\n  user-select: none !important;\n}\n.gu-transit {\n  opacity: 0.2;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";\n  filter: alpha(opacity=20);\n}\n',""])}}]);