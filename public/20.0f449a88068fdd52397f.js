(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{ZCEV:function(t,s,a){"use strict";a.r(s);var e={name:"my_dpps_overview",metaInfo:{title:"Разработка ДПП"},data:function(){return{dpp:{},stage_types:[],isBusy:!0,curStage:!1}},computed:{header:function(){return"Разработка ДПП / "+this.dpp.name}},methods:{setcurStage:function(t){this.curStage=t},start_work:function(t){var s=this;axios.post("/dpps/stages/start",{stage_id:t}).then((function(){6==s.curStage.stage_type_id&&s.$router.push("/my_dpps/"+s.dpp.id+"/stages/"+t+"/work_ish"),1==s.curStage.stage_type_id&&s.$router.push("/my_dpps/"+s.dpp.id+"/stages/"+t+"/work"),2==s.curStage.stage_type_id&&s.$router.push("/my_dpps/"+s.dpp.id+"/stages/"+t+"/work_om")}))}},mounted:function(){var t=this,s=this;axios.get("/dpps/"+this.$route.params.dpp+"/overview").then((function(s){return t.dpp=s.data})).finally((function(){var t=s.dpp.stages.filter((function(t){return t.id==s.dpp.current_stage_id}));s.curStage=t[0]}))}},i=a("KHd+"),r=Object(i.a)(e,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("router-link",{attrs:{icon:"ion ion-md-person",to:{name:"my_dpps"},exact:!0}},[a("b-button",{attrs:{variant:"info"}},[a("i",{staticClass:"ion ion-ios-arrow-back",staticStyle:{"font-size":"20px"}}),t._v(" Назад\n              ")])],1),t._v(" "),a("b-card",{attrs:{title:t.header}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 col-lg-4 col-xl-3"},[a("h5",[t._v("Этапы разработки:")]),t._v(" "),a("div",{staticClass:"ui-bordered mb-4"},t._l(t.dpp.stages,(function(s){return a("div",{key:s.id,staticClass:"d-flex align-items-center w-100 py-2 px-3",class:{"bg-lighter font-weight-bold":t.curStage==s.id}},[a("a",{staticClass:"d-block text-body",attrs:{href:"#"},on:{click:function(a){return t.setcurStage(s)}}},[t._v(t._s(t.dpp.stages.indexOf(s)+1)+". "+t._s(s.name))])])})),0)]),t._v(" "),a("div",{staticClass:"col-md-8 col-lg-8 col-xl-9"},[0==t.curStage?a("b-alert",{attrs:{show:"",variant:"info"}},[t._v("Выберите этап")]):t._e(),t._v(" "),t._l(t.dpp.stages,(function(s){return a("div",{key:s.id},[t.curStage.id==s.id?a("div",[a("h5",[t._v(t._s(t.dpp.stages.indexOf(s)+1)+". "+t._s(s.name))]),t._v(" "),a("p",[a("strong",[t._v("Статус этапа:")]),t._v(" "+t._s(s.stage_status_name))]),t._v(" "),1==s.stage_status_id?a("b-button",{attrs:{block:"",variant:"primary"},on:{click:function(a){return t.start_work(s.id)}}},[t._v("Начать работу")]):t._e(),t._v(" "),1==s.stage_type_id&&1!=s.stage_status_id&&2!=s.stage_status_id?a("router-link",{attrs:{icon:"ion ion-md-person",to:{name:"dpp_stage_work",params:{dpp:t.dpp.id,stage:s.id}},exact:!0}},[a("b-button",{attrs:{block:"",variant:"primary"}},[t._v("Продолжить работу")])],1):t._e(),t._v(" "),2==s.stage_type_id&&1!=s.stage_status_id&&2!=s.stage_status_id?a("router-link",{attrs:{icon:"ion ion-md-person",to:{name:"dpp_stage_work_om",params:{dpp:t.dpp.id,stage:s.id}},exact:!0}},[a("b-button",{attrs:{block:"",variant:"primary"}},[t._v("Продолжить работу")])],1):t._e(),t._v(" "),6==s.stage_type_id&&1!=s.stage_status_id&&2!=s.stage_status_id?a("router-link",{attrs:{icon:"ion ion-md-person",to:{name:"dpp_stage_work_ish",params:{dpp:t.dpp.id,stage:s.id}},exact:!0}},[a("b-button",{attrs:{block:"",variant:"primary"}},[t._v("Продолжить работу")])],1):t._e()],1):t._e()])}))],2)])])],1)}),[],!1,null,null,null);s.default=r.exports}}]);