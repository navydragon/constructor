(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"7RjY":function(e,t,n){"use strict";var i={name:"new-fgos",props:{fgos_levels:Array},data:function(){return{new_item:{code:"",name:"",fgos_level_id:""},errors:[]}},methods:{handle_ok:function(e){e.preventDefault(),this.errors=[],""==this.new_item.fgos_level_id&&this.errors.push("Не выбран уровень образования"),""==this.new_item.code&&this.errors.push("Не заполнено поле «Код»"),""==this.new_item.name&&this.errors.push("Не заполнено поле «Направление»"),0==this.errors.length&&this.$emit("add_fgos",this.new_item)}}},o=n("KHd+"),s=Object(o.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{size:"lg",id:"modal-new-fgos",title:"Добавить новый ФГОС","no-close-on-esc":"","no-close-on-backdrop":"","ok-title":"Сохранить","cancel-title":"Закрыть"},on:{ok:e.handle_ok}},[n("b-form-group",{attrs:{id:"fieldset-0",label:"Уровень образования","label-size":"lg"}},[n("b-form-select",{attrs:{options:e.fgos_levels,"value-field":"id","text-field":"name"},model:{value:e.new_item.fgos_level_id,callback:function(t){e.$set(e.new_item,"fgos_level_id",t)},expression:"new_item.fgos_level_id"}})],1),e._v(" "),n("b-form-group",{attrs:{id:"fieldset-1",description:"Пример: 08.03.01",label:"Код","label-size":"lg","label-for":"input-1"}},[n("b-form-input",{attrs:{id:"input-1",trim:""},model:{value:e.new_item.code,callback:function(t){e.$set(e.new_item,"code",t)},expression:"new_item.code"}})],1),e._v(" "),n("b-form-group",{attrs:{id:"fieldset-2",description:"Пример: Строительство",label:"Направление","label-size":"lg","label-for":"input-2"}},[n("b-form-input",{attrs:{id:"input-2",trim:""},model:{value:e.new_item.name,callback:function(t){e.$set(e.new_item,"name",t)},expression:"new_item.name"}})],1),e._v(" "),e.errors.length>0?n("b-alert",{attrs:{show:"",variant:"danger"}},[n("strong",[e._v("Обнаружены ошибки:")]),e._v(" "),n("ul",e._l(e.errors,(function(t,i){return n("li",{key:i},[e._v(e._s(t))])})),0)]):e._e()],1)}),[],!1,null,null,null);t.a=s.exports},"7dIG":function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,'.VueTables__child-row-toggler {\n  display: inline-block;\n  margin: auto;\n  width: 100%;\n  height: 16px;\n  text-align: center;\n  line-height: 16px;\n  cursor: pointer;\n}\n.VueTables__child-row-toggler--closed::before {\n  content: "+";\n}\n.VueTables__child-row-toggler--open::before {\n  content: "-";\n}\n.VueTables__sortable {\n  position: relative;\n}\n.VueTables__sort-icon {\n  position: absolute;\n  top: 50%;\n  right: 6px;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n[dir=rtl] .VueTables__sort-icon {\n  right: auto;\n  left: 6px;\n}\n.VuePagination nav {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  -ms-flex-pack: justify;\n      justify-content: space-between;\n  width: 100%;\n}\n.VuePagination .pagination,\n.VuePagination__count {\n  -ms-flex-preferred-size: auto !important;\n      flex-basis: auto !important;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  margin: 0 0 1rem 0;\n  width: auto !important;\n}\n.VueTables__search label,\n.VueTables__limit label {\n  display: inline-block !important;\n  margin-right: .5em;\n}\n[dir=rtl] .VueTables__search label, [dir=rtl]\n.VueTables__limit label {\n  margin-right: 0;\n  margin-left: .5em;\n}\n[dir="rtl"] .pull-left {\n  float: right;\n}\n[dir="rtl"] .pull-right {\n  float: left;\n}\n.default-style .VueTables__sort-icon {\n  color: #a3a4a6;\n  font-size: 0.75rem;\n}\n.default-style .VuePagination__pagination-item > a {\n  padding: 0.375rem 0.25rem;\n  min-width: calc(1.5rem + 2px);\n  text-align: center;\n  font-size: 0.75rem;\n  border-radius: 0.25rem;\n}\n.default-style .VuePagination__count {\n  color: #a3a4a6;\n  font-size: 0.75rem;\n}\n.material-style .VueTables__sort-icon {\n  color: #a3a4a6;\n  font-size: 0.75rem;\n}\n.material-style .VuePagination__pagination-item > a {\n  padding: 0.375rem 0.25rem;\n  min-width: calc(1.5rem + 0px);\n  text-align: center;\n  font-size: 0.75rem;\n  border-radius: 0.125rem;\n}\n.material-style .VuePagination__count {\n  color: #a3a4a6;\n  font-size: 0.75rem;\n}\n',""])},O8ez:function(e,t,n){"use strict";var i={name:"edit-fgos",props:{edit_item:Object,fgos_levels:Array},data:function(){return{new_item:{code:"",name:"",fgos_level_id:""},errors:[]}},methods:{handle_ok:function(e){e.preventDefault(),this.errors=[],""==this.new_item.fgos_level_id&&this.errors.push("Не выбран уровень образования"),""==this.new_item.code&&this.errors.push("Не заполнено поле «Код»"),""==this.new_item.name&&this.errors.push("Не заполнено поле «Направление»"),0==this.errors.length&&this.$emit("update_fgos",this.new_item)}},mounted:function(){self=this,axios.post("/fgoses/get_fgos",this.edit_item).then((function(e){self.new_item=e.data}))}},o=n("KHd+"),s=Object(o.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{size:"lg",id:"modal-edit-fgos",title:"Редактирование параметров ФГОС","no-close-on-esc":"","no-close-on-backdrop":"","ok-title":"Сохранить","cancel-title":"Закрыть"},on:{ok:e.handle_ok}},[n("b-form-group",{attrs:{id:"fieldset-0",label:"Уровень образования","label-size":"lg"}},[n("b-form-select",{attrs:{options:e.fgos_levels,"value-field":"id","text-field":"name"},model:{value:e.new_item.fgos_level_id,callback:function(t){e.$set(e.new_item,"fgos_level_id",t)},expression:"new_item.fgos_level_id"}})],1),e._v(" "),n("b-form-group",{attrs:{id:"fieldset-1",description:"Пример: 08.03.01",label:"Код","label-size":"lg","label-for":"input-1"}},[n("b-form-input",{attrs:{id:"input-1",trim:""},model:{value:e.new_item.code,callback:function(t){e.$set(e.new_item,"code",t)},expression:"new_item.code"}})],1),e._v(" "),n("b-form-group",{attrs:{id:"fieldset-2",description:"Пример: Строительство",label:"Направление","label-size":"lg","label-for":"input-2"}},[n("b-form-input",{attrs:{id:"input-2",trim:""},model:{value:e.new_item.name,callback:function(t){e.$set(e.new_item,"name",t)},expression:"new_item.name"}})],1),e._v(" "),e.errors.length>0?n("b-alert",{attrs:{show:"",variant:"danger"}},[n("strong",[e._v("Обнаружены ошибки:")]),e._v(" "),n("ul",e._l(e.errors,(function(t,i){return n("li",{key:i},[e._v(e._s(t))])})),0)]):e._e()],1)}),[],!1,null,null,null);t.a=s.exports},kYbW:function(e,t,n){var i=n("7dIG");"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,o);i.locals&&(e.exports=i.locals)},mswM:function(e,t,n){"use strict";var i=n("kYbW");n.n(i).a},wOG0:function(e,t,n){"use strict";n.r(t);var i=n("XuX8"),o=n.n(i),s=n("nr6O"),l=n("7RjY"),a=n("O8ez");o.a.use(s.ClientTable);var r={name:"fgoses",metaInfo:{title:"ФГОСы"},components:{ClientTable:s.ClientTable,NewFgos:l.a,EditFgos:a.a},data:function(){return{isBusy:!0,n_ps:"ps",edit_item:{},items:[],fgos_levels:[],columns:["code","name","level","actions"],options:{sortable:["name","code","level"],filterable:["name","code","level"],filterByColumn:!0,sortIcon:{is:"fa-sort",base:"fas",up:"fa-sort-up",down:"fa-sort-down"},headings:{name:"Направление",code:"Код",level:"Уровень",actions:"Действия"},texts:{count:"Showing {from} to {to} of {count} records|Записей: {count} |Одна запись",first:"First",last:"Last",filter:"Поиск:",filterPlaceholder:"текст поиска",limit:"Записей:",page:"Страница:",noResults:"Не найдено ни одной записи",filterBy:"Поиск",loading:"Загрузка...",defaultOption:"Select {column}",columns:"Columns"}}}},methods:{create_fgos:function(){this.$bvModal.show("modal-new-fgos")},add_fgos:function(e){self=this,axios.post("/fgoses/add_fgos",e).then((function(e){self.items.push(e.data),self.n_ps+=1}))},remove_fgos:function(e){var t=this;this.$bvModal.msgBoxConfirm("Действительно хотите удалить ФГОС «"+e.name+"»?").then((function(n){!0===n&&axios.post("/fgoses/remove_fgos",e).then((function(e){t.items=t.items.filter((function(t){return t.id!=e.data}))}))}))},edit_fgos:function(e){var t=this;this.edit_item=e,this.$nextTick((function(){t.$bvModal.show("modal-edit-fgos")}))},update_fgos:function(e){self=this,axios.post("/fgoses/update_fgos",e).then((function(e){var t=self.items.find((function(t){return t.id==e.data.id}));t.code=e.data.code,t.name=e.data.name,t.level=e.data.level,self.$bvModal.hide("modal-edit-fgos")})).finally((function(){return self.edit_item={}}))}},mounted:function(){self=this,axios.post("/fgoses/get_fgos_levels").then((function(e){self.fgos_levels=e.data})),this.$nextTick((function(){axios.post("/fgoses/get_fgoses").then((function(e){self.items=e.data})).finally((function(){return self.isBusy=!1}))}))}},f=(n("mswM"),n("KHd+")),d=Object(f.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{attrs:{title:"ФГОСы"}},[n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.create_fgos()}}},[e._v("Добавить ФГОС ")]),e._v(" "),n("hr",{staticClass:"container-m-nx border-light mt-2 mb-2"}),e._v(" "),e.isBusy?e._e():n("v-client-table",{attrs:{data:e.items,columns:e.columns,options:e.options},scopedSlots:e._u([{key:"actions",fn:function(t){return[n("div",[n("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-info icon-btn"},on:{click:function(n){return n.preventDefault(),e.edit_fgos(t.row)}}},[n("i",{staticClass:"ion ion-md-create"})]),e._v(" "),n("b-btn",{staticClass:"btn-sm",attrs:{variant:"outline-danger icon-btn"},on:{click:function(n){return n.preventDefault(),e.remove_fgos(t.row)}}},[n("i",{staticClass:"ion ion-md-close"})])],1)]}}],null,!1,2433424222)}),e._v(" "),n("new-fgos",{key:e.n_ps,attrs:{fgos_levels:e.fgos_levels},on:{add_fgos:e.add_fgos}}),e._v(" "),n("edit-fgos",{key:e.edit_item.id,attrs:{fgos_levels:e.fgos_levels,edit_item:e.edit_item},on:{update_fgos:e.update_fgos}})],1)}),[],!1,null,null,null);t.default=d.exports}}]);